<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- ì•± ì•„ì´ì½˜ ì„¤ì • -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cdefs%3E%3ClinearGradient id='bgGradient' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%231e3a8a;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%233b82f6;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='512' height='512' rx='100' fill='url(%23bgGradient)'/%3E%3Cpath d='M 256 100 L 380 200 L 380 380 L 280 380 L 280 280 L 232 280 L 232 380 L 132 380 L 132 200 Z' fill='white' opacity='0.9'/%3E%3Cpath d='M 256 100 L 400 210 L 380 210 L 256 110 L 132 210 L 112 210 Z' fill='white'/%3E%3Crect x='242' y='140' width='28' height='90' fill='%23fbbf24' rx='4'/%3E%3Crect x='226' y='170' width='60' height='28' fill='%23fbbf24' rx='4'/%3E%3Cpath d='M 256 50 L 246 70 L 266 70 Z' fill='%23fbbf24'/%3E%3Cpath d='M 256 462 L 246 442 L 266 442 Z' fill='%23fbbf24'/%3E%3Cpath d='M 462 256 L 442 246 L 442 266 Z' fill='%23fbbf24'/%3E%3Cpath d='M 50 256 L 70 246 L 70 266 Z' fill='%23fbbf24'/%3E%3Ctext x='256' y='440' font-family='Arial, sans-serif' font-size='40' font-weight='bold' fill='white' text-anchor='middle'%3EGENESIS%3C/text%3E%3Ctext x='256' y='475' font-family='Arial, sans-serif' font-size='48' font-weight='bold' fill='%23fbbf24' text-anchor='middle'%3E13:14%3C/text%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cdefs%3E%3ClinearGradient id='bgGradient' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%231e3a8a;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%233b82f6;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='512' height='512' rx='100' fill='url(%23bgGradient)'/%3E%3Cpath d='M 256 100 L 380 200 L 380 380 L 280 380 L 280 280 L 232 280 L 232 380 L 132 380 L 132 200 Z' fill='white' opacity='0.9'/%3E%3Cpath d='M 256 100 L 400 210 L 380 210 L 256 110 L 132 210 L 112 210 Z' fill='white'/%3E%3Crect x='242' y='140' width='28' height='90' fill='%23fbbf24' rx='4'/%3E%3Crect x='226' y='170' width='60' height='28' fill='%23fbbf24' rx='4'/%3E%3Cpath d='M 256 50 L 246 70 L 266 70 Z' fill='%23fbbf24'/%3E%3Cpath d='M 256 462 L 246 442 L 266 442 Z' fill='%23fbbf24'/%3E%3Cpath d='M 462 256 L 442 246 L 442 266 Z' fill='%23fbbf24'/%3E%3Cpath d='M 50 256 L 70 246 L 70 266 Z' fill='%23fbbf24'/%3E%3Ctext x='256' y='440' font-family='Arial, sans-serif' font-size='40' font-weight='bold' fill='white' text-anchor='middle'%3EGENESIS%3C/text%3E%3Ctext x='256' y='475' font-family='Arial, sans-serif' font-size='48' font-weight='bold' fill='%23fbbf24' text-anchor='middle'%3E13:14%3C/text%3E%3C/svg%3E">
    
    <!-- PWA ì„¤ì • -->
    <meta name="theme-color" content="#1e3a8a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="G-ALTAR 1314">
    <link rel="manifest" href="manifest.json">
    
    <meta name="author" content="Global Mission Church of Greater Seattle">
    <meta name="copyright" content="Copyright Â© 2026 GMC Seattle. All rights reserved.">
    
    <meta property="og:title" content="G-ALTAR 1314">
    <meta property="og:description" content="The Ear that Hears God's Voice | GMC Seattle">
    <meta property="og:image" content="poster.png">
    
    <title>G-ALTAR 1314</title>
    
    <!-- Firebase SDK (ì˜µì…˜) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Cinzel:wght@700;900&family=Noto+Serif+KR:wght@600;700&display=swap');

        :root {
            --navy: #1F4788; --navy-dark: #152E5A;
            --gold: #C9A227; --green: #27AE60;
            --bg: #F0F2F5; --text: #333333;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Noto Sans KR', sans-serif; background: var(--bg); color: var(--text); padding-bottom: 90px; }

        header {
            background: linear-gradient(135deg, var(--navy-dark), var(--navy));
            color: white; padding: 15px 20px 25px;
            border-bottom-left-radius: 25px; border-bottom-right-radius: 25px;
            box-shadow: 0 4px 15px rgba(31, 71, 136, 0.3);
        }
        .header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        
        .church-link { 
            text-decoration: none; color: white; display: flex; align-items: center; gap: 10px;
            opacity: 1; transition: opacity 0.2s; max-width: 80%;
        }
        .church-link:active { opacity: 0.7; }
        
        .church-logo {
            width: 45px; height: 45px; object-fit: cover;
            background: white; border-radius: 50%; padding: 0;
            border: 2px solid rgba(255,255,255,0.3);
            box-shadow: 0 2px 8px rgba(0,0,0,0.25);
        }

        .church-name { font-size: 0.75rem; font-weight: 500; letter-spacing: 0.5px; line-height: 1.2; text-shadow: 0 1px 2px rgba(0,0,0,0.3); }
        
        .lang-toggle {
            background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3);
            border-radius: 12px; padding: 5px 12px; font-size: 0.75rem; font-weight: 700; color: white; cursor: pointer; flex-shrink: 0;
        }
        .app-title-box { text-align: center; }
        .main-title { font-family: 'Cinzel', serif; font-size: 1.6rem; font-weight: 900; letter-spacing: 1px; }
        .sub-title { font-size: 0.8rem; opacity: 0.85; }

        .id-card {
            background: rgba(255,255,255,0.15); backdrop-filter: blur(5px);
            border-left: 3px solid var(--gold); margin-top: 15px; padding: 10px 15px;
            border-radius: 0 10px 10px 0; cursor: pointer; position: relative;
        }
        .id-card::after { content: 'âš™ï¸'; position: absolute; right: 10px; top: 50%; transform: translateY(-50%); opacity: 0.7; }
        .role-badge { font-size: 0.65rem; color: var(--gold); font-weight: 800; display: block; text-transform: uppercase; }
        .mokjang-text { font-family: 'Noto Serif KR', serif; font-size: 1.1rem; font-weight: 700; }

        .routine-banner {
            background: white; margin: -15px 15px 15px; border-radius: 15px;
            padding: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); text-align: center; position: relative; z-index: 10;
        }
        .routine-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px; }
        .r-item span { display: block; }
        .r-title { font-size: 0.7rem; color: #666; font-weight: 600; }
        .r-time { font-size: 0.9rem; font-weight: 800; color: var(--navy); }
        .key-verse { margin-top: 10px; padding-top: 8px; border-top: 1px solid #eee; color: var(--navy); font-weight: 700; font-size: 0.85rem; font-style: italic; }

        .container { padding: 0 15px; max-width: 600px; margin: 0 auto; }
        
        /* íƒ­ ì½˜í…ì¸  */
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        .tab-content.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: white; border-radius: 16px; padding: 18px; margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.03);
        }
        .card-header { display: flex; align-items: center; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #f5f5f5; }
        .icon-box {
            width: 36px; height: 36px; border-radius: 10px; display: flex; align-items: center; justify-content: center;
            font-size: 1.2rem; margin-right: 10px; flex-shrink: 0;
        }
        .c-navy .icon-box { background: #EBF1FF; color: var(--navy); }
        .c-gold .icon-box { background: #FFF9E6; color: var(--gold); }
        .c-green .icon-box { background: #E8F5E9; color: var(--green); }
        .card-title { font-weight: 700; font-size: 0.95rem; color: #333; flex-grow: 1; }
        .btn-reset { background:none; border:none; font-size:1.1rem; color:#ccc; cursor:pointer; padding:5px; }

        input, textarea, select {
            width: 100%; border: 1px solid #e0e0e0; background: #fafafa;
            border-radius: 10px; padding: 12px; font-size: 1rem; font-family: 'Noto Sans KR';
            outline: none; transition: 0.2s; -webkit-appearance: none;
        }
        input:focus, textarea:focus, select:focus { background: white; border-color: var(--navy); }
        .input-ref { border: none; border-bottom: 2px solid #eee; border-radius: 0; background: transparent; color: var(--navy); font-weight: 700; text-align: center; margin-bottom: 10px; }
        textarea { min-height: 100px; resize: vertical; line-height: 1.5; }

        /* íƒ€ì´ë¨¸ */
        .timer-display {
            font-family: 'Cinzel', monospace; font-size: 3.5rem; font-weight: 900;
            text-align: center; color: var(--gold); margin: 20px 0;
        }
        .timer-btn {
            width: 100%; padding: 15px; border: none; background: var(--navy);
            color: white; border-radius: 12px; font-size: 1rem; font-weight: 700;
            cursor: pointer; transition: 0.2s; font-family: 'Noto Sans KR';
        }
        .timer-btn.running { background: var(--gold); }
        .timer-btn.paused { background: #666; }

        /* ìê°€ì§„ë‹¨ ì ìˆ˜ ë²„íŠ¼ */
        .score-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #ddd;
            background: white;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            color: #666;
            transition: all 0.2s ease;
        }
        .score-btn:hover {
            border-color: var(--navy);
        }

        /* 21ì¼ ì±Œë¦°ì§€ */
        .challenge-status {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }
        .challenge-status.completed {
            background: linear-gradient(135deg, var(--green) 0%, #229954 100%);
        }
        .status-number {
            font-size: 3.5rem;
            font-weight: 900;
            line-height: 1;
        }
        .status-label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-top: 8px;
        }
        .progress-bar-container {
            background: rgba(255,255,255,0.2);
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 15px;
        }
        .progress-bar {
            background: var(--gold);
            height: 100%;
            border-radius: 5px;
            transition: width 0.5s;
        }

        .btn-start-challenge {
            background: linear-gradient(135deg, var(--gold), #d4af37);
            color: white;
            padding: 18px;
            border-radius: 15px;
            text-align: center;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            border: none;
            width: 100%;
            box-shadow: 0 4px 15px rgba(201, 162, 39, 0.3);
        }

        .week-section {
            margin-bottom: 20px;
        }
        .week-header {
            background: linear-gradient(to right, var(--navy), var(--navy-dark));
            color: white;
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            font-weight: 700;
            font-size: 0.9rem;
        }
        .day-item {
            background: #f8f9fa;
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: all 0.2s;
        }
        .day-item:hover {
            background: #e9ecef;
        }
        .day-item.completed {
            background: linear-gradient(to right, rgba(39, 174, 96, 0.1), rgba(39, 174, 96, 0.05));
            border-left: 4px solid var(--green);
        }
        .day-info {
            flex-grow: 1;
        }
        .day-number {
            font-weight: 700;
            color: var(--navy);
            margin-bottom: 3px;
            font-size: 0.85rem;
        }
        .day-title {
            font-size: 0.85rem;
            color: #666;
            line-height: 1.4;
        }
        .day-check {
            width: 35px;
            height: 35px;
            border: 2px solid #ddd;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
            transition: all 0.2s;
        }
        .day-item.completed .day-check {
            background: var(--green);
            border-color: var(--green);
            color: white;
        }

        /* ê°€ì´ë“œ */
        .guide-box {
            background: linear-gradient(to right, #f8f9fa, #eef2f3);
            border-left: 5px solid var(--navy);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .guide-title {
            color: var(--navy);
            font-weight: 800;
            margin-bottom: 10px;
            font-size: 1.05rem;
        }
        .guide-text {
            font-size: 0.9rem;
            line-height: 1.6;
            color: #444;
        }
        .guide-step {
            display: flex;
            gap: 12px;
            margin-bottom: 15px;
            align-items: flex-start;
        }
        .step-num {
            background: var(--gold);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.85rem;
            flex-shrink: 0;
        }
        .step-content h4 {
            font-size: 0.95rem;
            margin-bottom: 5px;
            color: var(--navy);
        }
        .step-content p {
            font-size: 0.85rem;
            color: #666;
            line-height: 1.5;
        }

        /* ëª©ì¥ */
        .mokjang-setup {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
        }
        .mokjang-setup h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #333;
        }
        .mokjang-setup p {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 15px;
        }
        .member-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        .member-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-size: 0.85rem;
        }
        .member-item.completed {
            background: linear-gradient(135deg, rgba(39, 174, 96, 0.1), rgba(39, 174, 96, 0.05));
            border: 2px solid var(--green);
        }
        .member-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        .member-status {
            font-size: 1.3rem;
        }

        /* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            border-top: 1px solid #eee;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.05);
            z-index: 1000;
            padding-bottom: max(8px, env(safe-area-inset-bottom));
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #999;
            font-size: 0.7rem;
            gap: 3px;
            padding: 5px 15px;
            transition: all 0.2s;
            flex: 1;
            cursor: pointer;
        }
        .nav-item.active {
            color: var(--navy);
            font-weight: 700;
        }
        .nav-icon {
            font-size: 1.3rem;
        }

        /* ëª¨ë‹¬ */
        .modal-wrap {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .modal-wrap.active {
            display: flex;
        }
        .modal-box {
            background: white;
            border-radius: 20px;
            padding: 25px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
        }

        .btn {
            display: block;
            width: 100%;
            padding: 14px;
            background: var(--navy);
            color: white;
            text-align: center;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 700;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            margin-top: 10px;
        }
        .btn:active {
            transform: scale(0.98);
        }
        .btn-gold {
            background: var(--gold);
        }
        .btn-green {
            background: var(--green);
        }
        .btn-secondary {
            background: #6c757d;
        }

        /* í† ìŠ¤íŠ¸ */
        #toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
            z-index: 3000;
            opacity: 0;
            transition: opacity 0.3s;
        }
        #toast.show {
            opacity: 1;
        }

        /* íˆìŠ¤í† ë¦¬ */
        .log-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: #f8f9fa;
            border-radius: 10px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: 0.2s;
        }
        .log-item:hover {
            background: #e9ecef;
        }
        .log-date {
            font-size: 0.75rem;
            color: #999;
            margin-bottom: 3px;
        }
        .log-ref {
            font-weight: 700;
            color: var(--navy);
        }

        .view-label {
            display: block;
            font-weight: 700;
            color: var(--navy);
            margin-top: 15px;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        .view-content {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            line-height: 1.6;
            color: #555;
        }
        .view-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        .btn-action {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Noto Sans KR';
        }

        .app-footer {
            text-align: center;
            font-size: 0.75rem;
            color: #999;
            padding: 20px 0;
            line-height: 1.5;
        }

        /* 4ë‹¨ê³„ ì˜ì  ì—¬ì • */
        .journey-model {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 12px;
        }
        .journey-title {
            text-align: center;
            font-weight: 700;
            color: var(--navy);
            margin-bottom: 15px;
            font-size: 0.9rem;
        }
        .journey-stages {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 5px;
        }
        .stage-item {
            flex: 1;
            text-align: center;
            padding: 8px 5px;
            border-radius: 8px;
            background: white;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
            cursor: pointer;
        }
        .stage-item.active {
            border-color: var(--gold);
            background: linear-gradient(to bottom, #FFF9E6, white);
        }
        .stage-num {
            font-size: 1.2rem;
            font-weight: 700;
            color: #999;
            margin-bottom: 3px;
        }
        .stage-item.active .stage-num {
            color: var(--gold);
        }
        .stage-label {
            font-size: 0.65rem;
            color: #666;
            text-align: center;
        }
        .stage-item.active .stage-label {
            color: var(--navy);
            font-weight: 700;
        }
        
        .shepherd-detail {
            display: none;
            margin-top: 10px;
        }
        .shepherd-detail.show {
            display: block;
        }
    </style>
</head>
<body>

    <header>
        <div class="header-top">
            <a href="http://www.ijiguchon.org" target="_blank" class="church-link">
                <img src="poster.png" onerror="this.src='https://via.placeholder.com/45/ffffff/1F4788?text=GMC'" class="church-logo" alt="GMC Logo">
                <span class="church-name" id="t-church">ì‹œì• í‹€ì§€êµ¬ì´ŒêµíšŒ</span>
            </a>
            <button class="lang-toggle" onclick="toggleLang()" id="langBtn">ENG</button>
        </div>
        <div class="app-title-box">
            <div class="main-title">G-ALTAR 1314</div>
            <div class="sub-title" id="t-subtitle">í•˜ë‚˜ë‹˜ì˜ ìŒì„±ì´ ë“¤ë¦¬ëŠ” ê·€</div>
        </div>
        <div class="id-card" onclick="openSettings()">
            <span class="role-badge" id="t-role">ìˆœë¡€ì</span>
            <div class="mokjang-text">
                <span id="displayName">í”„ë¡œí•„ ì„¤ì •</span>
                <span id="displayJourney" style="font-size:0.8rem; font-weight:400; opacity:0.8;"></span>
            </div>
        </div>
    </header>

    <div class="routine-banner">
        <div class="routine-grid">
            <div class="r-item">
                <span class="r-title" id="t-r1">ë§ì”€ ë¬µìƒ</span>
                <span class="r-time" id="t-time1">10ë¶„</span>
            </div>
            <div class="r-item">
                <span class="r-title" id="t-r2">ì¹¨ë¬µ ê¸°ë„</span>
                <span class="r-time" id="t-time2">15ë¶„</span>
            </div>
            <div class="r-item">
                <span class="r-title" id="t-r3">ê²½ì²­ ë…¸íŠ¸</span>
                <span class="r-time" id="t-time3">5ë¶„</span>
            </div>
        </div>
        <div class="key-verse" id="t-verse">"ë“¤ì„ ê·€ ìˆëŠ” ìëŠ” ë“¤ìœ¼ë¼!" (ë§‰ 4:9)</div>
    </div>

    <div class="container">
        
        <!-- íƒ­ 1: ì¼ì§€ (ê¸°ì¡´ ê¸°ëŠ¥) -->
        <div id="tab-journal" class="tab-content active">
            <div class="card c-navy">
                <div class="card-header">
                    <div class="icon-box">ğŸ“–</div>
                    <span class="card-title" id="t-card1">ë§ì”€ ë¬µìƒ (10ë¶„)</span>
                    <button class="btn-reset" onclick="resetInput('inRef','inText')">â†»</button>
                </div>
                <input type="text" id="inRef" class="input-ref" placeholder="ì˜¤ëŠ˜ì˜ ë³¸ë¬¸">
                <textarea id="inText" placeholder="ë¬µìƒí•œ ë§ì”€ì„ ê¸°ë¡í•˜ì„¸ìš”"></textarea>
            </div>
            <div class="card c-gold">
                <div class="card-header">
                    <div class="icon-box">ğŸ‘‚</div>
                    <span class="card-title" id="t-card2">ì¹¨ë¬µ ê¸°ë„ (15ë¶„)</span>
                </div>
                <div class="timer-display" id="timer">15:00</div>
                <button class="timer-btn" onclick="toggleTimer()" id="t-timer-btn">íƒ€ì´ë¨¸ ì‹œì‘</button>
                <div style="text-align:center; margin-top:10px; font-size:0.8rem; color:#888;" id="t-timer-msg">
                    ë‚´ ìƒê°ì˜ ì†Œë¦¬ë¥¼ ë„˜ê³  í•˜ë‚˜ë‹˜ì˜ ìŒì„±ì„ ë“£ìŠµë‹ˆë‹¤
                </div>
                <div style="text-align:center; margin-top:8px; font-size:0.75rem; color:#999; line-height:1.4;" id="t-timer-chime">
                    ğŸ”” ì°¨ì„ë²¨: 5ë¶„(ë‚®ì€ ìŒ), 10ë¶„(ì¤‘ê°„ ìŒ 2ë²ˆ), 15ë¶„(ë†’ì€ ìŒ)
                </div>
                <div style="text-align:center; margin-top:10px;">
                    <div style="display:inline-flex; align-items:center; gap:8px; cursor:pointer;" onclick="toggleChime()">
                        <button id="chimeBtn" style="
                            background: var(--gold);
                            border: none;
                            border-radius: 50%;
                            width: 36px;
                            height: 36px;
                            font-size: 1.2rem;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            box-shadow: 0 2px 8px rgba(243,156,18,0.3);
                        ">ğŸ””</button>
                        <span id="t-chime-status" style="font-size:0.85rem; font-weight:600; color:var(--gold);">ON</span>
                    </div>
                </div>
            </div>
            <div class="card c-green">
                <div class="card-header">
                    <div class="icon-box">âœï¸</div>
                    <span class="card-title" id="t-card3">ê²½ì²­ ë…¸íŠ¸ (5ë¶„)</span>
                    <button class="btn-reset" onclick="resetInput('inRhema','inAction','inThanks')">â†»</button>
                </div>
                <div id="t-lbl1" style="font-size:0.8rem; font-weight:700; color:#666; margin-bottom:5px;">1. í•˜ë‚˜ë‹˜ì´ ì£¼ì‹  ë§ˆìŒ</div>
                <textarea id="inRhema" style="margin-bottom:15px;" placeholder="ì£¼ë‹˜ì´ ë‚´ê²Œ ì£¼ì‹  ê¹¨ë‹¬ìŒ"></textarea>
                <div id="t-lbl2" style="font-size:0.8rem; font-weight:700; color:#666; margin-bottom:5px;">2. ìˆœì¢…í•  í–‰ë™</div>
                <textarea id="inAction" style="margin-bottom:15px;" placeholder="ì´ë²ˆ ì£¼ ì‹¤ì²œí•  êµ¬ì²´ì  í–‰ë™"></textarea>
                <div id="t-lbl3" style="font-size:0.8rem; font-weight:700; color:#666; margin-bottom:5px;">3. ê°ì‚¬ ê¸°ë„</div>
                <textarea id="inThanks" style="min-height:60px;" placeholder="ì£¼ë‹˜ê»˜ ë“œë¦¬ëŠ” ê°ì‚¬"></textarea>
            </div>
            
            <button class="btn btn-green" onclick="saveData()">
                <span id="t-btn-save">ì™„ë£Œ</span>
            </button>
            
            <button class="btn btn-secondary" onclick="viewHistory()">
                <span id="t-btn-hist">ê¸°ë¡ ë³´ê¸°</span>
            </button>

            <div class="app-footer">
                Created by Pastor Kim & GMC Seattle<br>
                Genesis 1314 - Expanding the Kingdom, One Home at a Time
            </div>
        </div>

       <!-- íƒ­ 2: 21ì¼ ì±Œë¦°ì§€ -->
        <div id="tab-challenge" class="tab-content">
            
            <!-- ìƒë‹¨ íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
            <div style="display:flex; background:#f5f5f5; border-radius:10px; padding:4px; margin-bottom:15px; overflow-x:auto;">
                <button class="challenge-tab-btn active" onclick="showChallengeSection('foundation')" 
                        data-ko="ì‹ í•™ì  ê¸°ì´ˆ" data-en="Foundation"
                        style="flex:1; padding:10px 5px; border:none; background:var(--navy); color:white; border-radius:8px; font-size:12px; cursor:pointer; white-space:nowrap;">
                    ì‹ í•™ì  ê¸°ì´ˆ
                </button>
                <button class="challenge-tab-btn" onclick="showChallengeSection('training')"
                        data-ko="21ì¼ í›ˆë ¨" data-en="21-Day"
                        style="flex:1; padding:10px 5px; border:none; background:transparent; color:#666; border-radius:8px; font-size:12px; cursor:pointer; white-space:nowrap;">
                    21ì¼ í›ˆë ¨
                </button>
                <button class="challenge-tab-btn" onclick="showChallengeSection('group')"
                        data-ko="ëª©ì¥ ê°€ì´ë“œ" data-en="Group Guide"
                        style="flex:1; padding:10px 5px; border:none; background:transparent; color:#666; border-radius:8px; font-size:12px; cursor:pointer; white-space:nowrap;">
                    ëª©ì¥ ê°€ì´ë“œ
                </button>
            </div>

            <!-- Part 1: ì‹ í•™ì  ê¸°ì´ˆ -->
            <div id="section-foundation" class="challenge-section">
                <h3 style="color:var(--navy); margin-bottom:10px;" data-ko="ê²½ì²­, ì™œ ì¤‘ìš”í•œê°€?" data-en="Why is Listening Important?">ê²½ì²­, ì™œ ì¤‘ìš”í•œê°€?</h3>
                <p style="color:#666; margin-bottom:20px; font-size:14px;" data-ko="ì„¤êµ ê²½ì²­ì˜ ì„±ê²½ì  ê¸°ì´ˆ 5ê°€ì§€" data-en="Five Biblical Foundations for Sermon Listening">ì„¤êµ ê²½ì²­ì˜ ì„±ê²½ì  ê¸°ì´ˆ 5ê°€ì§€</p>
                
                <!-- ì¹¼ëŸ¼ 1 -->
                <div class="card" style="margin-bottom:15px; border-left:4px solid var(--navy);">
                    <h4 style="color:var(--navy); font-size:15px; margin-bottom:10px;" data-ko="1. ë„¤ ì¢…ë¥˜ì˜ ë•… â€” ë§ˆê°€ë³µìŒ 4:1-20" data-en="1. Four Types of Soil â€” Mark 4:1-20">1. ë„¤ ì¢…ë¥˜ì˜ ë•… â€” ë§ˆê°€ë³µìŒ 4:1-20</h4>
                    <div style="background:#FFF8E1; border-left:3px solid #FFC107; padding:12px; margin:10px 0; font-style:italic;">
                        <span data-ko="&quot;ì”¨ ë¿Œë¦¬ëŠ” ì‚¬ëŒì´ ì”¨ë¥¼ ë¿Œë¦¬ëŸ¬ ë‚˜ê°”ë‹¤...&quot;" data-en="&quot;A farmer went out to sow his seed...&quot;">"ì”¨ ë¿Œë¦¬ëŠ” ì‚¬ëŒì´ ì”¨ë¥¼ ë¿Œë¦¬ëŸ¬ ë‚˜ê°”ë‹¤..."</span>
                        <span style="display:block; text-align:right; font-size:12px; color:#666; margin-top:5px;" data-ko="â€” ë§ˆê°€ë³µìŒ 4:3-4, ìƒˆë²ˆì—­" data-en="â€” Mark 4:3-4, NIV">â€” ë§ˆê°€ë³µìŒ 4:3-4, ìƒˆë²ˆì—­</span>
                    </div>
                    <p style="font-size:14px; line-height:1.6;" data-ko="ì˜ˆìˆ˜ë‹˜ì˜ ë¹„ìœ ì—ì„œ ì”¨ëŠ” ê°™ì•˜ì§€ë§Œ ê²°ê³¼ëŠ” ë‹¬ëìŠµë‹ˆë‹¤. ê·¸ ì°¨ì´ëŠ” ë•…ì— ìˆì—ˆìŠµë‹ˆë‹¤." data-en="In Jesus' parable, the seed was the same but results differed. The difference was in the soil.">ì˜ˆìˆ˜ë‹˜ì˜ ë¹„ìœ ì—ì„œ ì”¨ëŠ” ê°™ì•˜ì§€ë§Œ ê²°ê³¼ëŠ” ë‹¬ëìŠµë‹ˆë‹¤. ê·¸ ì°¨ì´ëŠ” ë•…ì— ìˆì—ˆìŠµë‹ˆë‹¤.</p>
                    <div style="background:#E3F2FD; border-radius:8px; padding:12px; margin-top:10px;">
                        <p style="font-weight:700; color:var(--navy); font-size:13px;">ğŸ’¡ <span data-ko="í•µì‹¬ ì§ˆë¬¸: ë‚˜ëŠ” ì–´ë–¤ ë•…ì¸ê°€?" data-en="Key Question: What kind of soil am I?">í•µì‹¬ ì§ˆë¬¸: ë‚˜ëŠ” ì–´ë–¤ ë•…ì¸ê°€?</span></p>
                    </div>
                </div>

                <!-- ì¹¼ëŸ¼ 2 -->
                <div class="card" style="margin-bottom:15px; border-left:4px solid var(--navy);">
                    <h4 style="color:var(--navy); font-size:15px; margin-bottom:10px;" data-ko="2. ë“¤ì„ ê·€ ìˆëŠ” ìëŠ” ë“¤ìœ¼ë¼ â€” ë§ˆê°€ë³µìŒ 4:9" data-en="2. Whoever Has Ears to Hear â€” Mark 4:9">2. ë“¤ì„ ê·€ ìˆëŠ” ìëŠ” ë“¤ìœ¼ë¼ â€” ë§ˆê°€ë³µìŒ 4:9</h4>
                    <div style="background:#FFF8E1; border-left:3px solid #FFC107; padding:12px; margin:10px 0; font-style:italic;">
                        <span data-ko="&quot;ë“¤ì„ ê·€ ìˆëŠ” ì‚¬ëŒì€ ë“¤ìœ¼ë¼!&quot;" data-en="&quot;Whoever has ears to hear, let them hear!&quot;">"ë“¤ì„ ê·€ ìˆëŠ” ì‚¬ëŒì€ ë“¤ìœ¼ë¼!"</span>
                        <span style="display:block; text-align:right; font-size:12px; color:#666; margin-top:5px;" data-ko="â€” ë§ˆê°€ë³µìŒ 4:9, ìƒˆë²ˆì—­" data-en="â€” Mark 4:9, NIV">â€” ë§ˆê°€ë³µìŒ 4:9, ìƒˆë²ˆì—­</span>
                    </div>
                    <p style="font-size:14px; line-height:1.6;" data-ko="ëª¨ë“  ì‚¬ëŒì´ ë“¤ì—ˆì§€ë§Œ, ëª¨ë“  ì‚¬ëŒì´ ë“¤ì€ ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤. ë“£ëŠ”ë‹¤ëŠ” ê²ƒì€ ì˜ì ìœ¼ë¡œ ë¶„ë³„í•˜ê³  ë°›ì•„ë“¤ì´ëŠ” ê²ƒì…ë‹ˆë‹¤." data-en="Everyone heard, but not everyone truly heard. Hearing means spiritually discerning and receiving.">ëª¨ë“  ì‚¬ëŒì´ ë“¤ì—ˆì§€ë§Œ, ëª¨ë“  ì‚¬ëŒì´ ë“¤ì€ ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.</p>
                </div>

                <!-- ì¹¼ëŸ¼ 3 -->
                <div class="card" style="margin-bottom:15px; border-left:4px solid var(--navy);">
                    <h4 style="color:var(--navy); font-size:15px; margin-bottom:10px;" data-ko="3. ì„±ë ¹ì˜ ì¡°ëª… â€” ê³ ë¦°ë„ì „ì„œ 2:14" data-en="3. Illumination of the Spirit â€” 1 Corinthians 2:14">3. ì„±ë ¹ì˜ ì¡°ëª… â€” ê³ ë¦°ë„ì „ì„œ 2:14</h4>
                    <div style="background:#FFF8E1; border-left:3px solid #FFC107; padding:12px; margin:10px 0; font-style:italic;">
                        <span data-ko="&quot;ìœ¡ì— ì†í•œ ì‚¬ëŒì€ í•˜ë‚˜ë‹˜ì˜ ì˜ì˜ ì¼ë“¤ì„ ë°›ì•„ë“¤ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.&quot;" data-en="&quot;The person without the Spirit does not accept the things from the Spirit of God.&quot;">"ìœ¡ì— ì†í•œ ì‚¬ëŒì€ í•˜ë‚˜ë‹˜ì˜ ì˜ì˜ ì¼ë“¤ì„ ë°›ì•„ë“¤ì´ì§€ ì•ŠìŠµë‹ˆë‹¤."</span>
                        <span style="display:block; text-align:right; font-size:12px; color:#666; margin-top:5px;" data-ko="â€” ê³ ë¦°ë„ì „ì„œ 2:14, ìƒˆë²ˆì—­" data-en="â€” 1 Corinthians 2:14, NIV">â€” ê³ ë¦°ë„ì „ì„œ 2:14, ìƒˆë²ˆì—­</span>
                    </div>
                    <p style="font-size:14px; line-height:1.6;" data-ko="ê²½ì²­ì€ ì§‘ì¤‘ë ¥ì˜ ë¬¸ì œê°€ ì•„ë‹ˆë¼, ì„±ë ¹ê»˜ ì—´ë¦° ë§ˆìŒì˜ ë¬¸ì œì…ë‹ˆë‹¤." data-en="Listening is not about concentration, but about having a heart open to the Spirit.">ê²½ì²­ì€ ì§‘ì¤‘ë ¥ì˜ ë¬¸ì œê°€ ì•„ë‹ˆë¼, ì„±ë ¹ê»˜ ì—´ë¦° ë§ˆìŒì˜ ë¬¸ì œì…ë‹ˆë‹¤.</p>
                </div>

                <!-- ì¹¼ëŸ¼ 4 -->
                <div class="card" style="margin-bottom:15px; border-left:4px solid var(--navy);">
                    <h4 style="color:var(--navy); font-size:15px; margin-bottom:10px;" data-ko="4. ë¯¿ìŒì€ ë“¤ìŒì—ì„œ â€” ë¡œë§ˆì„œ 10:17" data-en="4. Faith Comes from Hearing â€” Romans 10:17">4. ë¯¿ìŒì€ ë“¤ìŒì—ì„œ â€” ë¡œë§ˆì„œ 10:17</h4>
                    <div style="background:#FFF8E1; border-left:3px solid #FFC107; padding:12px; margin:10px 0; font-style:italic;">
                        <span data-ko="&quot;ë¯¿ìŒì€ ë“¤ìŒì—ì„œ ë‚˜ì˜¤ê³ , ë“¤ìŒì€ ê·¸ë¦¬ìŠ¤ë„ì˜ ë§ì”€ì—ì„œ ì˜µë‹ˆë‹¤.&quot;" data-en="&quot;Faith comes from hearing the message, and the message is heard through the word about Christ.&quot;">"ë¯¿ìŒì€ ë“¤ìŒì—ì„œ ë‚˜ì˜¤ê³ , ë“¤ìŒì€ ê·¸ë¦¬ìŠ¤ë„ì˜ ë§ì”€ì—ì„œ ì˜µë‹ˆë‹¤."</span>
                        <span style="display:block; text-align:right; font-size:12px; color:#666; margin-top:5px;" data-ko="â€” ë¡œë§ˆì„œ 10:17, ìƒˆë²ˆì—­" data-en="â€” Romans 10:17, NIV">â€” ë¡œë§ˆì„œ 10:17, ìƒˆë²ˆì—­</span>
                    </div>
                    <p style="font-size:14px; line-height:1.6;" data-ko="ì„¤êµëŠ” ì§€ì‹ ì „ë‹¬ì´ ì•„ë‹ˆë¼, ë¯¿ìŒì„ ì¼ìœ¼í‚¤ëŠ” í•˜ë‚˜ë‹˜ì˜ ë„êµ¬ì…ë‹ˆë‹¤." data-en="Preaching is not knowledge transfer, but God's instrument for producing faith.">ì„¤êµëŠ” ì§€ì‹ ì „ë‹¬ì´ ì•„ë‹ˆë¼, ë¯¿ìŒì„ ì¼ìœ¼í‚¤ëŠ” í•˜ë‚˜ë‹˜ì˜ ë„êµ¬ì…ë‹ˆë‹¤.</p>
                </div>

                <!-- ì¹¼ëŸ¼ 5 -->
                <div class="card" style="margin-bottom:15px; border-left:4px solid var(--navy);">
                    <h4 style="color:var(--navy); font-size:15px; margin-bottom:10px;" data-ko="5. ë§ì”€ì„ í–‰í•˜ëŠ” ì â€” ì•¼ê³ ë³´ì„œ 1:22" data-en="5. Doers of the Word â€” James 1:22">5. ë§ì”€ì„ í–‰í•˜ëŠ” ì â€” ì•¼ê³ ë³´ì„œ 1:22</h4>
                    <div style="background:#FFF8E1; border-left:3px solid #FFC107; padding:12px; margin:10px 0; font-style:italic;">
                        <span data-ko="&quot;ë§ì”€ì„ í–‰í•˜ëŠ” ì‚¬ëŒì´ ë˜ì‹­ì‹œì˜¤. ë“£ê¸°ë§Œ í•˜ì—¬ ìì‹ ì„ ì†ì´ì§€ ë§ˆì‹­ì‹œì˜¤.&quot;" data-en="&quot;Do not merely listen to the word. Do what it says.&quot;">"ë§ì”€ì„ í–‰í•˜ëŠ” ì‚¬ëŒì´ ë˜ì‹­ì‹œì˜¤."</span>
                        <span style="display:block; text-align:right; font-size:12px; color:#666; margin-top:5px;" data-ko="â€” ì•¼ê³ ë³´ì„œ 1:22, ìƒˆë²ˆì—­" data-en="â€” James 1:22, NIV">â€” ì•¼ê³ ë³´ì„œ 1:22, ìƒˆë²ˆì—­</span>
                    </div>
                    <p style="font-size:14px; line-height:1.6;" data-ko="ì§„ì •í•œ ê²½ì²­ì€ ì‚¶ì˜ ë³€í™”ë¡œ ì¦ëª…ë©ë‹ˆë‹¤." data-en="True listening is proven by life transformation.">ì§„ì •í•œ ê²½ì²­ì€ ì‚¶ì˜ ë³€í™”ë¡œ ì¦ëª…ë©ë‹ˆë‹¤.</p>
                </div>
            </div>

            <!-- Part 2: 21ì¼ í›ˆë ¨ -->
            <div id="section-training" class="challenge-section" style="display:none;">
                <h3 style="color:var(--navy); margin-bottom:10px;" data-ko="21ì¼ ê²½ì²­ í”„ë¡œì íŠ¸" data-en="21-Day Listening Project">21ì¼ ê²½ì²­ í”„ë¡œì íŠ¸</h3>
                
                <!-- ì§„í–‰ë¥  -->
                <div class="challenge-status">
                    <div class="status-number" id="trainingProgressDays">0</div>
                    <div class="status-label" data-ko="ì¼ ì™„ë£Œ / 21ì¼" data-en="days / 21">ì¼ ì™„ë£Œ / 21ì¼</div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="trainingProgressBar" style="width:0%"></div>
                    </div>
                </div>

                <!-- ë§¤ì¼ ê¸°ë³¸ ë£¨í‹´ -->
                <div class="card" style="background:linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%); margin:15px 0;">
                    <p style="font-weight:700; color:var(--navy); margin-bottom:10px;">âœ¦ <span data-ko="ë§¤ì¼ì˜ ê¸°ë³¸ ë£¨í‹´" data-en="Daily Basic Routine">ë§¤ì¼ì˜ ê¸°ë³¸ ë£¨í‹´</span></p>
                    <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:10px; text-align:center;">
                        <div style="background:white; padding:10px; border-radius:8px;">
                            <div style="font-size:20px;">ğŸ“–</div>
                            <div style="font-weight:600; font-size:12px;" data-ko="ë§ì”€ ë¬µìƒ" data-en="Scripture">ë§ì”€ ë¬µìƒ</div>
                            <div style="font-size:11px; color:#666;">10ë¶„</div>
                        </div>
                        <div style="background:white; padding:10px; border-radius:8px;">
                            <div style="font-size:20px;">ğŸ™</div>
                            <div style="font-weight:600; font-size:12px;" data-ko="ì¹¨ë¬µ ê¸°ë„" data-en="Prayer">ì¹¨ë¬µ ê¸°ë„</div>
                            <div style="font-size:11px; color:#666;">15ë¶„</div>
                        </div>
                        <div style="background:white; padding:10px; border-radius:8px;">
                            <div style="font-size:20px;">âœï¸</div>
                            <div style="font-weight:600; font-size:12px;" data-ko="ê²½ì²­ ë…¸íŠ¸" data-en="Note">ê²½ì²­ ë…¸íŠ¸</div>
                            <div style="font-size:11px; color:#666;">5ë¶„</div>
                        </div>
                    </div>
                </div>

                <!-- 1ì£¼ì°¨ -->
                <div style="background:linear-gradient(135deg, var(--navy) 0%, #2F5597 100%); color:white; padding:12px 15px; border-radius:10px; margin:20px 0 10px;">
                    <div style="font-weight:700;" data-ko="ğŸ“… 1ì£¼ì°¨: ê·€ì˜ í• ë¡€" data-en="ğŸ“… Week 1: Circumcision of Ears">ğŸ“… 1ì£¼ì°¨: ê·€ì˜ í• ë¡€</div>
                    <div style="font-size:12px; opacity:0.9;" data-ko="ì„¸ìƒì˜ ì†ŒìŒì„ ì¤„ì´ê³  í•˜ë‚˜ë‹˜ê»˜ ì£¼íŒŒìˆ˜ ë§ì¶”ê¸°" data-en="Reduce worldly noise and tune to God">ì„¸ìƒì˜ ì†ŒìŒì„ ì¤„ì´ê³  í•˜ë‚˜ë‹˜ê»˜ ì£¼íŒŒìˆ˜ ë§ì¶”ê¸°</div>
                </div>
                <div id="week1Container"></div>

                <!-- 2ì£¼ì°¨ -->
                <div style="background:linear-gradient(135deg, var(--navy) 0%, #2F5597 100%); color:white; padding:12px 15px; border-radius:10px; margin:20px 0 10px;">
                    <div style="font-weight:700;" data-ko="ğŸ“… 2ì£¼ì°¨: ê±°ë£©í•œ ê³µëª…" data-en="ğŸ“… Week 2: Holy Resonance">ğŸ“… 2ì£¼ì°¨: ê±°ë£©í•œ ê³µëª…</div>
                    <div style="font-size:12px; opacity:0.9;" data-ko="ì„¤êµìì™€ ìƒí˜¸ì‘ìš©í•˜ë©° ë§ì”€ì„ ë‚´ ê²ƒìœ¼ë¡œ" data-en="Interact and make the Word your own">ì„¤êµìì™€ ìƒí˜¸ì‘ìš©í•˜ë©° ë§ì”€ì„ ë‚´ ê²ƒìœ¼ë¡œ</div>
                </div>
                <div id="week2Container"></div>

                <!-- 3ì£¼ì°¨ -->
                <div style="background:linear-gradient(135deg, var(--navy) 0%, #2F5597 100%); color:white; padding:12px 15px; border-radius:10px; margin:20px 0 10px;">
                    <div style="font-weight:700;" data-ko="ğŸ“… 3ì£¼ì°¨: ë§ì”€ì˜ ì„±ìœ¡ì‹ " data-en="ğŸ“… Week 3: Incarnation of the Word">ğŸ“… 3ì£¼ì°¨: ë§ì”€ì˜ ì„±ìœ¡ì‹ </div>
                    <div style="font-size:12px; opacity:0.9;" data-ko="ë“¤ì€ ë§ì”€ì„ ì‚¶ìœ¼ë¡œ ì‹¤ì²œí•˜ê¸°" data-en="Translate the Word into action">ë“¤ì€ ë§ì”€ì„ ì‚¶ìœ¼ë¡œ ì‹¤ì²œí•˜ê¸°</div>
                </div>
                <div id="week3Container"></div>

                <!-- ì´ˆê¸°í™” ë²„íŠ¼ -->
                <div style="text-align:center; margin-top:20px;">
                    <button onclick="resetTrainingProgress()" style="background:#f44336; color:white; border:none; padding:10px 20px; border-radius:8px; cursor:pointer;">
                        <span data-ko="ğŸ”„ ì§„í–‰ ìƒí™© ì´ˆê¸°í™”" data-en="ğŸ”„ Reset Progress">ğŸ”„ ì§„í–‰ ìƒí™© ì´ˆê¸°í™”</span>
                    </button>
                </div>
            </div>

            <!-- Part 3: ëª©ì¥ ê°€ì´ë“œ -->
            <div id="section-group" class="challenge-section" style="display:none;">
                <h3 style="color:var(--navy); margin-bottom:10px;" data-ko="ëª©ì¥ ë‚˜ëˆ” ê°€ì´ë“œ" data-en="Small Group Guide">ëª©ì¥ ë‚˜ëˆ” ê°€ì´ë“œ</h3>
                <p style="color:#666; margin-bottom:20px; font-size:14px;" data-ko="ì„¤êµëŠ” ë‚˜ëˆ”ì„ í†µí•´ ê·¼ìœ¡ì´ ë©ë‹ˆë‹¤" data-en="Sermons become muscle through sharing">ì„¤êµëŠ” ë‚˜ëˆ”ì„ í†µí•´ ê·¼ìœ¡ì´ ë©ë‹ˆë‹¤</p>

                <!-- Step 1 -->
                <div class="card" style="border-left:4px solid var(--navy); margin-bottom:15px;">
                    <span style="background:var(--navy); color:white; padding:3px 10px; border-radius:10px; font-size:11px;">Step 1</span>
                    <h4 style="margin:10px 0; color:var(--navy);" data-ko="íƒœë„ ì ê²€ (10ë¶„)" data-en="Attitude Check (10 min)">íƒœë„ ì ê²€ (10ë¶„)</h4>
                    <p style="font-style:italic; color:#666; margin-bottom:10px;" data-ko="&quot;ìš°ë¦¬ëŠ” ì–´ë–¤ ê·¸ë¦‡ì´ì—ˆìŠµë‹ˆê¹Œ?&quot;" data-en="&quot;What kind of vessel were we?&quot;">"ìš°ë¦¬ëŠ” ì–´ë–¤ ê·¸ë¦‡ì´ì—ˆìŠµë‹ˆê¹Œ?"</p>
                    <ul style="font-size:14px; line-height:1.8; margin-left:20px;">
                        <li data-ko="ì§€ë‚œ ì£¼ì¼ ì§‘ì¤‘ì„ ë°©í•´í•œ ê°€ì¥ í° ìš”ì¸ì€?" data-en="What distracted you most last Sunday?">ì§€ë‚œ ì£¼ì¼ ì§‘ì¤‘ì„ ë°©í•´í•œ ê°€ì¥ í° ìš”ì¸ì€?</li>
                        <li data-ko="ì„œë¡œ ì–´ë–»ê²Œ ë„ì™€ì¤„ ìˆ˜ ìˆì„ê¹Œìš”?" data-en="How can we help each other?">ì„œë¡œ ì–´ë–»ê²Œ ë„ì™€ì¤„ ìˆ˜ ìˆì„ê¹Œìš”?</li>
                    </ul>
                </div>

                <!-- Step 2 -->
                <div class="card" style="border-left:4px solid var(--navy); margin-bottom:15px;">
                    <span style="background:var(--navy); color:white; padding:3px 10px; border-radius:10px; font-size:11px;">Step 2</span>
                    <h4 style="margin:10px 0; color:var(--navy);" data-ko="ë§ì”€ ì†Œí™” (15ë¶„)" data-en="Digesting the Word (15 min)">ë§ì”€ ì†Œí™” (15ë¶„)</h4>
                    <p style="font-style:italic; color:#666; margin-bottom:10px;" data-ko="&quot;ë‚´ê²Œ ê½‚íŒ í•œ ë¬¸ì¥ì€?&quot;" data-en="&quot;What one sentence pierced your heart?&quot;">"ë‚´ê²Œ ê½‚íŒ í•œ ë¬¸ì¥ì€?"</p>
                    <ul style="font-size:14px; line-height:1.8; margin-left:20px;">
                        <li data-ko="ë‚˜ë¥¼ ì•„í”„ê²Œ/ìœ„ë¡œí•œ ë”± í•œ ë¬¸ì¥ì€?" data-en="What sentence hurt or comforted you?">ë‚˜ë¥¼ ì•„í”„ê²Œ/ìœ„ë¡œí•œ ë”± í•œ ë¬¸ì¥ì€?</li>
                        <li data-ko="ì™œ ê·¸ ë§ì”€ì´ ë‚´ê²Œ ë“¤ë ¤ì™”ì„ê¹Œìš”?" data-en="Why did that Word come to you?">ì™œ ê·¸ ë§ì”€ì´ ë‚´ê²Œ ë“¤ë ¤ì™”ì„ê¹Œìš”?</li>
                    </ul>
                </div>

                <!-- Step 3 -->
                <div class="card" style="border-left:4px solid var(--navy); margin-bottom:15px;">
                    <span style="background:var(--navy); color:white; padding:3px 10px; border-radius:10px; font-size:11px;">Step 3</span>
                    <h4 style="margin:10px 0; color:var(--navy);" data-ko="ìˆœì¢… ê³„ì•½ (15ë¶„)" data-en="Obedience Covenant (15 min)">ìˆœì¢… ê³„ì•½ (15ë¶„)</h4>
                    <p style="font-style:italic; color:#666; margin-bottom:10px;" data-ko="&quot;ì´ë²ˆ ì£¼ì— ë¬´ì—‡ì„ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?&quot;" data-en="&quot;What will you do this week?&quot;">"ì´ë²ˆ ì£¼ì— ë¬´ì—‡ì„ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"</p>
                    <ul style="font-size:14px; line-height:1.8; margin-left:20px;">
                        <li data-ko="ì´ë²ˆ ì£¼ ì‹¤ì²œí•  êµ¬ì²´ì  í–‰ë™ í•˜ë‚˜ëŠ”?" data-en="One specific action this week?">ì´ë²ˆ ì£¼ ì‹¤ì²œí•  êµ¬ì²´ì  í–‰ë™ í•˜ë‚˜ëŠ”?</li>
                        <li data-ko="ì–´ë–¤ ë„ì›€ì´ í•„ìš”í•˜ì‹­ë‹ˆê¹Œ?" data-en="What help do you need?">ì–´ë–¤ ë„ì›€ì´ í•„ìš”í•˜ì‹­ë‹ˆê¹Œ?</li>
                    </ul>
                </div>

                <!-- ëª©ì íŒ -->
                <h4 style="color:var(--navy); margin:20px 0 10px;" data-ko="ğŸ’¡ ëª©ìë¥¼ ìœ„í•œ íŒ" data-en="ğŸ’¡ Tips for Leaders">ğŸ’¡ ëª©ìë¥¼ ìœ„í•œ íŒ</h4>
                
                <div class="card" style="background:#E3F2FD; margin-bottom:10px;">
                    <p style="font-weight:700; color:var(--navy); font-size:14px;" data-ko="1. &quot;ë‚˜ë„ ê·¸ë¬ì–´&quot; ì›ì¹™" data-en="1. 'Me Too' Principle">1. "ë‚˜ë„ ê·¸ë¬ì–´" ì›ì¹™</p>
                    <p style="font-size:13px;" data-ko="ëª©ìë¶€í„° ë¨¼ì € ì†”ì§í•˜ê²Œ ì‹¤íŒ¨ë¥¼ ë‚˜ëˆ„ì„¸ìš”." data-en="Leaders share their failures first.">ëª©ìë¶€í„° ë¨¼ì € ì†”ì§í•˜ê²Œ ì‹¤íŒ¨ë¥¼ ë‚˜ëˆ„ì„¸ìš”.</p>
                </div>
                
                <div class="card" style="background:#E3F2FD; margin-bottom:10px;">
                    <p style="font-weight:700; color:var(--navy); font-size:14px;" data-ko="2. &quot;ê±°ë£©í•œ ì§ê¿&quot; ì‹œìŠ¤í…œ" data-en="2. 'Holy Partner' System">2. "ê±°ë£©í•œ ì§ê¿" ì‹œìŠ¤í…œ</p>
                    <p style="font-size:13px;" data-ko="ë‘˜ì”© ì§ì§€ì–´ í† ìš”ì¼ ë°¤, ì£¼ì¼ ì˜¤í›„ ì„œë¡œ ë¬¸ìí•˜ê¸°" data-en="Pair up for Saturday night & Sunday afternoon texts">ë‘˜ì”© ì§ì§€ì–´ í† ìš”ì¼ ë°¤, ì£¼ì¼ ì˜¤í›„ ì„œë¡œ ë¬¸ìí•˜ê¸°</p>
                </div>
                
                <div class="card" style="background:#E3F2FD; margin-bottom:10px;">
                    <p style="font-weight:700; color:var(--navy); font-size:14px;" data-ko="3. ì²´í¬ì¸" data-en="3. Check-in">3. ì²´í¬ì¸</p>
                    <p style="font-size:13px;" data-ko="ë‹¤ìŒ ì£¼ ëª¨ì„ ì‹œì‘ ë•Œ ì§€ë‚œì£¼ ê²°ë‹¨ í™•ì¸í•˜ê¸°" data-en="Check last week's commitment at next meeting">ë‹¤ìŒ ì£¼ ëª¨ì„ ì‹œì‘ ë•Œ ì§€ë‚œì£¼ ê²°ë‹¨ í™•ì¸í•˜ê¸°</p>
                </div>
            </div>

        </div>
        <!-- íƒ­ 3: ëª©ì¥ -->
        <div id="tab-mokjang" class="tab-content">
            <!-- ëª©ì¥ ë‚˜ëˆ” ê°€ì´ë“œ -->
            <div class="card" style="margin-bottom:15px; border-left:4px solid var(--gold);">
                <h3 style="color:var(--navy); margin-bottom:12px;" 
                    data-ko="ğŸ  ëª©ì¥ ë‚˜ëˆ”, ì´ë ‡ê²Œ í•˜ì„¸ìš”" 
                    data-en="ğŸ  How to Share in Small Group">ğŸ  ëª©ì¥ ë‚˜ëˆ”, ì´ë ‡ê²Œ í•˜ì„¸ìš”</h3>
                
                <div style="background:#f8f9fa; padding:12px; border-radius:8px; margin-bottom:12px;">
                    <p style="font-weight:700; color:var(--navy); font-size:14px; margin-bottom:8px;"
                       data-ko="ğŸ“‹ 3ë‹¨ê³„ ë‚˜ëˆ”ë²•" data-en="ğŸ“‹ 3-Step Sharing">ğŸ“‹ 3ë‹¨ê³„ ë‚˜ëˆ”ë²•</p>
                    
                    <div style="display:flex; align-items:flex-start; gap:10px; margin-bottom:10px;">
                        <span style="background:var(--navy); color:white; border-radius:50%; width:22px; height:22px; display:flex; align-items:center; justify-content:center; font-size:12px; flex-shrink:0;">1</span>
                        <div>
                            <p style="font-weight:600; font-size:13px; color:var(--navy);" data-ko="ë‚´ê²Œ ê½‚íŒ í•œ ë¬¸ì¥" data-en="One sentence that pierced me">ë‚´ê²Œ ê½‚íŒ í•œ ë¬¸ì¥</p>
                            <p style="font-size:12px; color:#666;" data-ko="ì„¤êµì—ì„œ ê°€ì¥ ë§ˆìŒì— ì™€ë‹¿ì€ ë§ì”€ì„ ë‚˜ëˆ•ë‹ˆë‹¤" data-en="Share the word that touched your heart most">ì„¤êµì—ì„œ ê°€ì¥ ë§ˆìŒì— ì™€ë‹¿ì€ ë§ì”€ì„ ë‚˜ëˆ•ë‹ˆë‹¤</p>
                        </div>
                    </div>
                    
                    <div style="display:flex; align-items:flex-start; gap:10px; margin-bottom:10px;">
                        <span style="background:var(--navy); color:white; border-radius:50%; width:22px; height:22px; display:flex; align-items:center; justify-content:center; font-size:12px; flex-shrink:0;">2</span>
                        <div>
                            <p style="font-weight:600; font-size:13px; color:var(--navy);" data-ko="ë‚´ ì‚¶ì— ì ìš©í•œ í•œ ê°€ì§€" data-en="One thing I applied">ë‚´ ì‚¶ì— ì ìš©í•œ í•œ ê°€ì§€</p>
                            <p style="font-size:12px; color:#666;" data-ko="ì´ë²ˆ ì£¼ ë§ì”€ëŒ€ë¡œ ìˆœì¢…í•œ ê²½í—˜ì„ ë‚˜ëˆ•ë‹ˆë‹¤" data-en="Share how you obeyed the Word this week">ì´ë²ˆ ì£¼ ë§ì”€ëŒ€ë¡œ ìˆœì¢…í•œ ê²½í—˜ì„ ë‚˜ëˆ•ë‹ˆë‹¤</p>
                        </div>
                    </div>
                    
                    <div style="display:flex; align-items:flex-start; gap:10px;">
                        <span style="background:var(--navy); color:white; border-radius:50%; width:22px; height:22px; display:flex; align-items:center; justify-content:center; font-size:12px; flex-shrink:0;">3</span>
                        <div>
                            <p style="font-weight:600; font-size:13px; color:var(--navy);" data-ko="ì„œë¡œë¥¼ ìœ„í•œ ê¸°ë„" data-en="Pray for each other">ì„œë¡œë¥¼ ìœ„í•œ ê¸°ë„</p>
                            <p style="font-size:12px; color:#666;" data-ko="ë‚˜ëˆˆ ë‚´ìš©ì„ ê¸°ì–µí•˜ë©° ì„œë¡œë¥¼ ìœ„í•´ ê¸°ë„í•©ë‹ˆë‹¤" data-en="Pray for each other remembering what was shared">ë‚˜ëˆˆ ë‚´ìš©ì„ ê¸°ì–µí•˜ë©° ì„œë¡œë¥¼ ìœ„í•´ ê¸°ë„í•©ë‹ˆë‹¤</p>
                        </div>
                    </div>
                </div>
                
                <div style="background:#E3F2FD; padding:10px; border-radius:8px;">
                    <p style="font-size:12px; color:var(--navy); line-height:1.6;"
                       data-ko="ğŸ’¡ íŒ: ì¼ì§€ì— ê¸°ë¡í•œ 'í•˜ë‚˜ë‹˜ì´ ì£¼ì‹  ë§ˆìŒ'ê³¼ 'ìˆœì¢…í•  í–‰ë™'ì„ ëª©ì¥ì—ì„œ ë‚˜ëˆ„ë©´ ë”ìš± í’ì„±í•œ ë‚˜ëˆ”ì´ ë©ë‹ˆë‹¤."
                       data-en="ğŸ’¡ Tip: Sharing what you recorded in your journal makes for richer discussion.">
                        ğŸ’¡ íŒ: ì¼ì§€ì— ê¸°ë¡í•œ 'í•˜ë‚˜ë‹˜ì´ ì£¼ì‹  ë§ˆìŒ'ê³¼ 'ìˆœì¢…í•  í–‰ë™'ì„ ëª©ì¥ì—ì„œ ë‚˜ëˆ„ë©´ ë”ìš± í’ì„±í•œ ë‚˜ëˆ”ì´ ë©ë‹ˆë‹¤.
                    </p>
                </div>
            </div>

            <div id="mokjang-not-setup" style="display:none;">
                <div class="mokjang-setup">
                    <h3>ğŸ‘¥ ëª©ì¥ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤</h3>
                    <p>ëª©ì¥ ì‹êµ¬ë“¤ê³¼ í•¨ê»˜ 21ì¼ì„ ì™„ì£¼í•˜ì„¸ìš”!</p>
                    <button class="btn" onclick="openMokjangSetup()">ëª©ì¥ ì„¤ì •í•˜ê¸°</button>
                </div>
                
                <div class="card">
                    <h3 style="color:var(--navy); margin-bottom:10px;">ğŸ’¡ ëª©ì¥ ê¸°ëŠ¥ì´ë€?</h3>
                    <p style="line-height:1.6; color:#666; font-size:0.9rem;">
                        ëª©ì¥ ì½”ë“œë¥¼ ì…ë ¥í•˜ë©´ ëª©ì¥ ì‹êµ¬ë“¤ì˜ 21ì¼ ì±Œë¦°ì§€ ì§„í–‰ ìƒí™©(ì™„ë£Œ ì—¬ë¶€)ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
                        ê°œì¸ ì¼ì§€ ë‚´ìš©ì€ ì™„ì „íˆ ë¹„ê³µê°œì´ë©°, ì˜¤ì§ ì™„ë£Œ ì—¬ë¶€(O/X)ë§Œ ê³µìœ ë©ë‹ˆë‹¤.
                    </p>
                </div>
            </div>

            <div id="mokjang-content" style="display:none;">
                <div class="card">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; padding-bottom:10px; border-bottom:2px solid #f0f0f0;">
                        <div>
                            <div style="font-weight:700; color:var(--navy); font-size:1.1rem;" id="mokjangName">ëª©ì¥ëª…</div>
                            <div style="font-size:0.85rem; color:#666; margin-top:3px;">
                                <span id="mokjangCompleted">0</span> / <span id="mokjangTotal">0</span> ëª… ì˜¤ëŠ˜ ì™„ë£Œ
                            </div>
                        </div>
                    </div>

                    <div class="member-grid" id="memberGrid">
                        <!-- ë™ì  ìƒì„± -->
                    </div>
                </div>

                <!-- ëª©ì¥ ë¦¬ë”ë³´ë“œ -->
                <div class="card">
                    <h3 style="color:var(--navy); margin-bottom:12px;">ğŸ† ëª©ì¥ ë¦¬ë”ë³´ë“œ</h3>
                    <p style="font-size:12px; color:#666; margin-bottom:10px;" data-ko="21ì¼ ê²½ì²­ í”„ë¡œì íŠ¸ ì§„í–‰ë¥ " data-en="21-Day Listening Project Progress">21ì¼ ê²½ì²­ í”„ë¡œì íŠ¸ ì§„í–‰ë¥ </p>
                    <div id="mokjangLeaderboard" style="font-size:14px;">
                        <p style="text-align:center; color:#999;">ë¡œë”© ì¤‘...</p>
                    </div>
                </div>

                <div class="card">
                    <h3 style="color:var(--navy); margin-bottom:10px;">ğŸ’¬ ê²©ë ¤ ë©”ì‹œì§€</h3>
                    <p style="text-align:center; color:#666; font-size:0.9rem; padding:20px;">
                        í•¨ê»˜ ë‹¬ë ¤ê°€ëŠ” ìš°ë¦¬ ëª©ì¥ ì‹êµ¬ë“¤ì„ ìœ„í•´ ê¸°ë„í•©ë‹ˆë‹¤ ğŸ™
                    </p>
                </div>

                <button class="btn btn-secondary" onclick="leaveMokjang()">ëª©ì¥ ë‚˜ê°€ê¸°</button>
            </div>
        </div>

        <!-- íƒ­ 4: ê°€ì´ë“œ -->
        <div id="tab-guide" class="tab-content">
            <div class="card">
                <h2 style="color:var(--navy); margin-bottom:15px; text-align:center;">ğŸ“š ê²½ì²­ ê°€ì´ë“œ</h2>

                <div class="guide-box">
                    <div class="guide-title">ğŸ’¡ ì™œ 'ë“£ëŠ” ê¸°ë„'ì¸ê°€ìš”?</div>
                    <div class="guide-text">
                        ê²½ì²­ê¸°ë„ëŠ” ì‹ ë¹„ì£¼ì˜ê°€ ì•„ë‹™ë‹ˆë‹¤.<br>
                        <strong>"ë‚´ ì–‘ì€ ë‚´ ìŒì„±ì„ ë“¤ìœ¼ë©°"</strong> (ìš” 10:27) í•˜ì‹  ì˜ˆìˆ˜ë‹˜ì˜ ë§ì”€ì²˜ëŸ¼, 
                        ëª©ìì´ì‹  ì£¼ë‹˜ì˜ ëœ»ì„ ë“£ê³  <strong>ìˆœì¢…í•˜ê¸° ìœ„í•œ í›ˆë ¨</strong>ì…ë‹ˆë‹¤.
                    </div>
                </div>

                <h3 style="color:var(--navy); margin:20px 0 15px 0;">ì£¼ê¸°ë„ë¬¸ìœ¼ë¡œ í•˜ëŠ” ê²½ì²­ë²• (5 Step)</h3>
                
                <div style="background:#FFF8E1; padding:12px; border-radius:8px; margin-bottom:15px; border-left:3px solid var(--gold);">
                    <p style="font-size:13px; color:#666; line-height:1.6;">
                        <strong style="color:var(--navy);">ğŸ’¡ ì‹œì‘í•˜ê¸° ì „ì—:</strong> 
                        ì¡°ìš©í•œ ì¥ì†Œì—ì„œ 15ë¶„ì„ í™•ë³´í•˜ì„¸ìš”. íœ´ëŒ€í°ì€ ë¬´ìŒìœ¼ë¡œ í•˜ê³ , 
                        ì„±ê²½ê³¼ ë…¸íŠ¸ë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤. ëˆˆì„ ê°ê³  ì‹¬í˜¸í¡ 3ë²ˆìœ¼ë¡œ ë§ˆìŒì„ ê°€ë¼ì•‰íˆì„¸ìš”.
                    </p>
                </div>

                <div class="guide-step">
                    <div class="step-num">1</div>
                    <div class="step-content">
                        <h4>í•˜ëŠ˜ì— ê³„ì‹  ìš°ë¦¬ ì•„ë²„ì§€</h4>
                        <p>ë©ˆì¶”ì„¸ìš”(Stop). ê·¸ë¦¬ê³  ë‚˜ë¥¼ ë¶€ë¥´ì‹œëŠ” ì•„ë²„ì§€ì˜ ì‚¬ë‘ ì•ˆì—ì„œ í‰ì•ˆì„ ëˆ„ë¦¬ì„¸ìš”.</p>
                        <div style="background:#E3F2FD; padding:10px; border-radius:6px; margin-top:8px;">
                            <p style="font-size:12px; color:#1565C0; line-height:1.5;">
                                <strong>ğŸ™ ì‹¤ì²œ:</strong> "ì•„ë²„ì§€, ì €ëŠ” ë‹¹ì‹ ì˜ ìë…€ì…ë‹ˆë‹¤"ë¥¼ ì²œì²œíˆ 3ë²ˆ ê³ ë°±í•˜ì„¸ìš”. 
                                í•˜ë‚˜ë‹˜ì´ ë‚˜ë¥¼ ì–´ë–¤ ëˆˆìœ¼ë¡œ ë°”ë¼ë³´ì‹œëŠ”ì§€ ë¬µìƒí•©ë‹ˆë‹¤. (2ë¶„)
                            </p>
                        </div>
                    </div>
                </div>

                <div class="guide-step">
                    <div class="step-num">2</div>
                    <div class="step-content">
                        <h4>ë‚˜ë¼ê°€ ì„í•˜ì‹œì˜¤ë©°</h4>
                        <p>ë‚´ ê³„íšì„ ë‚´ë ¤ë†“ê³ , ì˜¤ëŠ˜ ë‚´ ê°€ì •ê³¼ ì¼í„°ì— ì„í•˜ì‹¤ í•˜ë‚˜ë‹˜ì˜ ëœ»ì„ ë¬¼ìœ¼ì„¸ìš”.</p>
                        <div style="background:#E3F2FD; padding:10px; border-radius:6px; margin-top:8px;">
                            <p style="font-size:12px; color:#1565C0; line-height:1.5;">
                                <strong>ğŸ™ ì‹¤ì²œ:</strong> "ì£¼ë‹˜, ì˜¤ëŠ˜ ì œ ì‚¶ì˜ ì–´ë–¤ ì˜ì—­ì—ì„œ ë‹¹ì‹ ì˜ ë‚˜ë¼ê°€ ì„í•˜ê¸¸ ì›í•˜ì‹­ë‹ˆê¹Œ?" 
                                ì§ˆë¬¸í•˜ê³  ì¡°ìš©íˆ ê¸°ë‹¤ë¦½ë‹ˆë‹¤. ë– ì˜¤ë¥´ëŠ” ìƒê°ì„ ë…¸íŠ¸ì— ì ìœ¼ì„¸ìš”. (3ë¶„)
                            </p>
                        </div>
                    </div>
                </div>

                <div class="guide-step">
                    <div class="step-num">3</div>
                    <div class="step-content">
                        <h4>ì¼ìš©í•  ì–‘ì‹ì„ ì£¼ì˜µì‹œê³ </h4>
                        <p>ì˜¤ëŠ˜ ì£¼ì‹  ë§ì”€(QT)ì„ í´ì„¸ìš”. ë§ì”€ ë°–ì˜ ìŒì„±ì€ ìœ„í—˜í•©ë‹ˆë‹¤. ì„±ê²½ì„ í†µí•´ ë“¤ìœ¼ì„¸ìš”.</p>
                        <div style="background:#E3F2FD; padding:10px; border-radius:6px; margin-top:8px;">
                            <p style="font-size:12px; color:#1565C0; line-height:1.5;">
                                <strong>ğŸ™ ì‹¤ì²œ:</strong> ì˜¤ëŠ˜ì˜ ë³¸ë¬¸ì„ ì²œì²œíˆ 2ë²ˆ ì½ìŠµë‹ˆë‹¤. 
                                "ì´ ë§ì”€ì—ì„œ ë¬´ì—‡ì„ ë§ì”€í•˜ê³  ê³„ì‹­ë‹ˆê¹Œ?"ë¼ê³  ë¬»ê³ , 
                                ë§ˆìŒì— ê½‚íˆëŠ” í•œ êµ¬ì ˆì„ ì ìœ¼ì„¸ìš”. (5ë¶„)
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="guide-step">
                    <div class="step-num">4</div>
                    <div class="step-content">
                        <h4>ìš°ë¦¬ê°€ ìš°ë¦¬ì—ê²Œ ì£„ ì§€ì€ ìë¥¼...</h4>
                        <p>ë§ˆìŒì— ê±¸ë¦¬ëŠ” ê´€ê³„ë‚˜ ì£„ê°€ ìˆë‚˜ìš”? ì„±ë ¹ë‹˜ê»˜ ë¬»ê³  íšŒê°œí•˜ë©° ë§ˆìŒì„ ì •ê²°ì¼€ í•˜ì„¸ìš”.</p>
                        <div style="background:#E3F2FD; padding:10px; border-radius:6px; margin-top:8px;">
                            <p style="font-size:12px; color:#1565C0; line-height:1.5;">
                                <strong>ğŸ™ ì‹¤ì²œ:</strong> "ì„±ë ¹ë‹˜, ì œ ë§ˆìŒì— íšŒê°œí•  ê²ƒì´ ìˆìŠµë‹ˆê¹Œ?" 
                                ë– ì˜¤ë¥´ëŠ” ì‚¬ëŒ, ìƒí™©ì´ ìˆìœ¼ë©´ êµ¬ì²´ì ìœ¼ë¡œ íšŒê°œí•©ë‹ˆë‹¤. 
                                ìš©ì„œí•´ì•¼ í•  ì‚¬ëŒì´ ìˆë‹¤ë©´ ì´ë¦„ì„ ë¶ˆëŸ¬ ìš©ì„œë¥¼ ì„ í¬í•˜ì„¸ìš”. (3ë¶„)
                            </p>
                        </div>
                    </div>
                </div>

                <div class="guide-step">
                    <div class="step-num">5</div>
                    <div class="step-content">
                        <h4>ë‚˜ë¼ì™€ ê¶Œì„¸ì™€ ì˜ê´‘ì´...</h4>
                        <p>ë“¤ì€ ë§ì”€ì— ìˆœì¢…í•˜ê¸°ë¡œ ê²°ë‹¨í•˜ë©°, ì°¬ì–‘ìœ¼ë¡œ ê¸°ë„ë¥¼ ë§ˆì¹˜ì„¸ìš”.</p>
                        <div style="background:#E3F2FD; padding:10px; border-radius:6px; margin-top:8px;">
                            <p style="font-size:12px; color:#1565C0; line-height:1.5;">
                                <strong>ğŸ™ ì‹¤ì²œ:</strong> ì˜¤ëŠ˜ ë“¤ì€ ê²ƒì„ í•œ ë¬¸ì¥ìœ¼ë¡œ ìš”ì•½í•˜ì„¸ìš”: 
                                "ì˜¤ëŠ˜ í•˜ë‚˜ë‹˜ì€ ______ë¥¼ ë§ì”€í•˜ì…¨ê³ , ë‚˜ëŠ” ______ë¥¼ ìˆœì¢…í•˜ê² ìŠµë‹ˆë‹¤." 
                                ê°ì‚¬ì™€ ì°¬ì–‘ìœ¼ë¡œ ë§ˆì¹©ë‹ˆë‹¤. (2ë¶„)
                            </p>
                        </div>
                    </div>
                </div>

                <div style="background: linear-gradient(135deg, var(--navy) 0%, #2F5597 100%); padding: 15px; border-radius: 8px; text-align: center; margin-top: 20px; color:white;">
                    <p style="font-size: 0.9rem; font-weight: bold; line-height: 1.6;">
                        "ë§ì”€(Logos)ìœ¼ë¡œ ê²€ì¦í•˜ê³ ,<br>
                        ì„±ë ¹(Pneuma)ìœ¼ë¡œ ê°ë™ë°›ì•„,<br>
                        ì‚¶ìœ¼ë¡œ ìˆœì¢…(Obey)í•©ë‹ˆë‹¤."
                    </p>
                </div>
                
                <div style="background:#E8F5E9; padding:12px; border-radius:8px; margin-top:15px; border-left:3px solid #4CAF50;">
                    <p style="font-size:13px; color:#2E7D32; line-height:1.6;">
                        <strong>âš ï¸ ë¶„ë³„ì˜ ì›ì¹™:</strong> 
                        ë“¤ì€ ìŒì„±ì´ â‘  ì„±ê²½ ë§ì”€ê³¼ ì¼ì¹˜í•˜ëŠ”ê°€? â‘¡ í•˜ë‚˜ë‹˜ì˜ ì„±í’ˆ(ì‚¬ë‘, ê±°ë£©)ê³¼ ì¼ì¹˜í•˜ëŠ”ê°€? 
                        â‘¢ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì„±ë„ì˜ í™•ì¸ì„ ë°›ì•˜ëŠ”ê°€? ì„¸ ê°€ì§€ë¡œ ê²€ì¦í•˜ì„¸ìš”.
                    </p>
                </div>
            </div>

            <div class="card">
                <h3 style="color:var(--navy); margin-bottom:15px;" id="guide-selfcheck-title">ğŸ“– ìê°€ ì§„ë‹¨ (8ë¬¸í•­)</h3>
                <p style="line-height:1.6; color:#666; margin-bottom:15px;" id="guide-selfcheck-desc">
                    ì§€ë‚œ ì£¼ì¼ ì˜ˆë°°ë¥¼ ë– ì˜¬ë¦¬ë©° ì†”ì§í•˜ê²Œ ì²´í¬í•´ë³´ì„¸ìš”. (ê° ë¬¸í•­ 1~5ì )
                </p>
                <div style="background:#f8f9fa; padding:15px; border-radius:8px;">
                    <!-- ë¬¸í•­ 1 -->
                    <div style="margin-bottom:20px;">
                        <div style="font-size:0.85rem; color:#333; margin-bottom:8px; font-weight:600;" 
                             id="guide-q1"
                             data-ko="1. ì˜ˆë°° 10ë¶„ ì „ì— ë„ì°©í•˜ì—¬ ê¸°ë„ë¡œ ë§ˆìŒ ë°­ì„ ê¸°ê²½í–ˆëŠ”ê°€?"
                             data-en="1. Arrived 10 min early and prepared heart with prayer?">
                            1. ì˜ˆë°° 10ë¶„ ì „ì— ë„ì°©í•˜ì—¬ ê¸°ë„ë¡œ ë§ˆìŒ ë°­ì„ ê¸°ê²½í–ˆëŠ”ê°€?
                        </div>
                        <div style="display:flex; gap:6px; justify-content:center;">
                            <button onclick="selectScore(0, 1)" id="q0-s1" class="score-btn">1</button>
                            <button onclick="selectScore(0, 2)" id="q0-s2" class="score-btn">2</button>
                            <button onclick="selectScore(0, 3)" id="q0-s3" class="score-btn">3</button>
                            <button onclick="selectScore(0, 4)" id="q0-s4" class="score-btn">4</button>
                            <button onclick="selectScore(0, 5)" id="q0-s5" class="score-btn">5</button>
                        </div>
                    </div>
                    <!-- ë¬¸í•­ 2 -->
                    <div style="margin-bottom:20px;">
                        <div style="font-size:0.85rem; color:#333; margin-bottom:8px; font-weight:600;" 
                             id="guide-q2"
                             data-ko="2. ì„¸ìƒì˜ ì—¼ë ¤ë¥¼ ëŠì–´ë‚´ê³  ë§ì”€ì„ ì‚¬ëª¨í•¨ìœ¼ë¡œ ì¤€ë¹„í–ˆëŠ”ê°€?"
                             data-en="2. Cut off worldly worries and longed for the Word?">
                            2. ì„¸ìƒì˜ ì—¼ë ¤ë¥¼ ëŠì–´ë‚´ê³  ë§ì”€ì„ ì‚¬ëª¨í•¨ìœ¼ë¡œ ì¤€ë¹„í–ˆëŠ”ê°€?
                        </div>
                        <div style="display:flex; gap:6px; justify-content:center;">
                            <button onclick="selectScore(1, 1)" id="q1-s1" class="score-btn">1</button>
                            <button onclick="selectScore(1, 2)" id="q1-s2" class="score-btn">2</button>
                            <button onclick="selectScore(1, 3)" id="q1-s3" class="score-btn">3</button>
                            <button onclick="selectScore(1, 4)" id="q1-s4" class="score-btn">4</button>
                            <button onclick="selectScore(1, 5)" id="q1-s5" class="score-btn">5</button>
                        </div>
                    </div>
                    <!-- ë¬¸í•­ 3 -->
                    <div style="margin-bottom:20px;">
                        <div style="font-size:0.85rem; color:#333; margin-bottom:8px; font-weight:600;" 
                             id="guide-q3"
                             data-ko="3. ì„¤êµ ì¤‘ ì§‘ì¤‘í–ˆëŠ”ê°€?"
                             data-en="3. Stayed focused during sermon?">
                            3. ì„¤êµ ì¤‘ ì§‘ì¤‘í–ˆëŠ”ê°€?
                        </div>
                        <div style="display:flex; gap:6px; justify-content:center;">
                            <button onclick="selectScore(2, 1)" id="q2-s1" class="score-btn">1</button>
                            <button onclick="selectScore(2, 2)" id="q2-s2" class="score-btn">2</button>
                            <button onclick="selectScore(2, 3)" id="q2-s3" class="score-btn">3</button>
                            <button onclick="selectScore(2, 4)" id="q2-s4" class="score-btn">4</button>
                            <button onclick="selectScore(2, 5)" id="q2-s5" class="score-btn">5</button>
                        </div>
                    </div>
                    <!-- ë¬¸í•­ 4 -->
                    <div style="margin-bottom:20px;">
                        <div style="font-size:0.85rem; color:#333; margin-bottom:8px; font-weight:600;" 
                             id="guide-q4"
                             data-ko="4. ë”´ìƒê°ì„ ì˜ì§€ì ìœ¼ë¡œ ëŠì–´ëƒˆëŠ”ê°€?"
                             data-en="4. Deliberately cut off wandering thoughts?">
                            4. ë”´ìƒê°ì„ ì˜ì§€ì ìœ¼ë¡œ ëŠì–´ëƒˆëŠ”ê°€?
                        </div>
                        <div style="display:flex; gap:6px; justify-content:center;">
                            <button onclick="selectScore(3, 1)" id="q3-s1" class="score-btn">1</button>
                            <button onclick="selectScore(3, 2)" id="q3-s2" class="score-btn">2</button>
                            <button onclick="selectScore(3, 3)" id="q3-s3" class="score-btn">3</button>
                            <button onclick="selectScore(3, 4)" id="q3-s4" class="score-btn">4</button>
                            <button onclick="selectScore(3, 5)" id="q3-s5" class="score-btn">5</button>
                        </div>
                    </div>
                    <!-- ë¬¸í•­ 5 -->
                    <div style="margin-bottom:20px;">
                        <div style="font-size:0.85rem; color:#333; margin-bottom:8px; font-weight:600;" 
                             id="guide-q5"
                             data-ko="5. ì±…ë§ì˜ ë§ì”€ë„ &quot;ì•„ë©˜&quot;ìœ¼ë¡œ ë°›ì•˜ëŠ”ê°€?"
                             data-en="5. Accepted even rebuking words with 'Amen'?">
                            5. ì±…ë§ì˜ ë§ì”€ë„ "ì•„ë©˜"ìœ¼ë¡œ ë°›ì•˜ëŠ”ê°€?
                        </div>
                        <div style="display:flex; gap:6px; justify-content:center;">
                            <button onclick="selectScore(4, 1)" id="q4-s1" class="score-btn">1</button>
                            <button onclick="selectScore(4, 2)" id="q4-s2" class="score-btn">2</button>
                            <button onclick="selectScore(4, 3)" id="q4-s3" class="score-btn">3</button>
                            <button onclick="selectScore(4, 4)" id="q4-s4" class="score-btn">4</button>
                            <button onclick="selectScore(4, 5)" id="q4-s5" class="score-btn">5</button>
                        </div>
                    </div>
                    <!-- ë¬¸í•­ 6 -->
                    <div style="margin-bottom:20px;">
                        <div style="font-size:0.85rem; color:#333; margin-bottom:8px; font-weight:600;" 
                             id="guide-q6"
                             data-ko="6. ë©”ì‹œì§€ì˜ ë³¸ì§ˆì— ê·€ ê¸°ìš¸ì˜€ëŠ”ê°€?"
                             data-en="6. Listened to essence of message?">
                            6. ë©”ì‹œì§€ì˜ ë³¸ì§ˆì— ê·€ ê¸°ìš¸ì˜€ëŠ”ê°€?
                        </div>
                        <div style="display:flex; gap:6px; justify-content:center;">
                            <button onclick="selectScore(5, 1)" id="q5-s1" class="score-btn">1</button>
                            <button onclick="selectScore(5, 2)" id="q5-s2" class="score-btn">2</button>
                            <button onclick="selectScore(5, 3)" id="q5-s3" class="score-btn">3</button>
                            <button onclick="selectScore(5, 4)" id="q5-s4" class="score-btn">4</button>
                            <button onclick="selectScore(5, 5)" id="q5-s5" class="score-btn">5</button>
                        </div>
                    </div>
                    <!-- ë¬¸í•­ 7 -->
                    <div style="margin-bottom:20px;">
                        <div style="font-size:0.85rem; color:#333; margin-bottom:8px; font-weight:600;" 
                             id="guide-q7"
                             data-ko="7. ì‹¤ì²œí•  í•œ ê°€ì§€ë¥¼ ì •í–ˆëŠ”ê°€?"
                             data-en="7. Decided one thing to practice?">
                            7. ì‹¤ì²œí•  í•œ ê°€ì§€ë¥¼ ì •í–ˆëŠ”ê°€?
                        </div>
                        <div style="display:flex; gap:6px; justify-content:center;">
                            <button onclick="selectScore(6, 1)" id="q6-s1" class="score-btn">1</button>
                            <button onclick="selectScore(6, 2)" id="q6-s2" class="score-btn">2</button>
                            <button onclick="selectScore(6, 3)" id="q6-s3" class="score-btn">3</button>
                            <button onclick="selectScore(6, 4)" id="q6-s4" class="score-btn">4</button>
                            <button onclick="selectScore(6, 5)" id="q6-s5" class="score-btn">5</button>
                        </div>
                    </div>
                    <!-- ë¬¸í•­ 8 -->
                    <div style="margin-bottom:20px;">
                        <div style="font-size:0.85rem; color:#333; margin-bottom:8px; font-weight:600;" 
                             id="guide-q8"
                             data-ko="8. ì£¼ì¤‘ì— ì‹¤ì œ ì‚¶ì—ì„œ ì ìš©í–ˆëŠ”ê°€?"
                             data-en="8. Applied it in actual life during the week?">
                            8. ì£¼ì¤‘ì— ì‹¤ì œ ì‚¶ì—ì„œ ì ìš©í–ˆëŠ”ê°€?
                        </div>
                        <div style="display:flex; gap:6px; justify-content:center;">
                            <button onclick="selectScore(7, 1)" id="q7-s1" class="score-btn">1</button>
                            <button onclick="selectScore(7, 2)" id="q7-s2" class="score-btn">2</button>
                            <button onclick="selectScore(7, 3)" id="q7-s3" class="score-btn">3</button>
                            <button onclick="selectScore(7, 4)" id="q7-s4" class="score-btn">4</button>
                            <button onclick="selectScore(7, 5)" id="q7-s5" class="score-btn">5</button>
                        </div>
                    </div>
                </div>
                <div style="margin-top:15px; padding:15px; background:#fff; border-radius:8px; border:2px solid var(--navy); text-align:center;">
                    <div style="font-size:1.5rem; font-weight:700; color:var(--navy); margin-bottom:8px;">
                        <span id="guide-total-score">ì´ì : 0ì </span>
                    </div>
                    <div style="font-size:0.9rem; color:#666; margin-bottom:10px;">
                        <span id="guide-score-result">ë¬¸í•­ì„ ì²´í¬í•´ë³´ì„¸ìš”</span>
                    </div>
                    <button onclick="resetSelfCheck()" style="
                        padding:8px 20px;
                        background:#667eea;
                        color:white;
                        border:none;
                        border-radius:6px;
                        cursor:pointer;
                        font-size:0.85rem;
                    " id="guide-reset-btn">ë‹¤ì‹œ ì²´í¬</button>
                </div>
                <div style="margin-top:15px; padding:12px; background:linear-gradient(to right, #667eea, #764ba2); color:white; border-radius:8px; text-align:center;" id="guide-selfcheck-scoring">
                    <strong>35-40ì :</strong> ì˜¥í†  | <strong>25-34ì :</strong> ì„±ì¥ ì¤‘ | <strong>24ì  ì´í•˜:</strong> í›ˆë ¨ í•„ìš”
                </div>
            </div>

            <div class="app-footer">
                Created by Pastor Kim & GMC Seattle<br>
                Genesis 1314 - Expanding the Kingdom, One Home at a Time
            </div>
        </div>

        <!-- íƒ­ 5: í†µì—­ -->
        <div id="tab-interpreter" class="tab-content">
            <div class="card">
                <h2 style="color:var(--navy); margin-bottom:15px; text-align:center;" 
                    id="interpreter-title"
                    data-ko="ğŸ¤ ì„¤êµ í†µì—­ê¸°"
                    data-en="ğŸ¤ Sermon Interpreter">
                    ğŸ¤ ì„¤êµ í†µì—­ê¸°
                </h2>
                <p style="text-align:center; color:#666; margin-bottom:20px; line-height:1.6;"
                   id="interpreter-desc"
                   data-ko="ì‹¤ì‹œê°„ìœ¼ë¡œ ì„¤êµë¥¼ í†µì—­í•©ë‹ˆë‹¤"
                   data-en="Real-time sermon interpretation">
                    ì‹¤ì‹œê°„ìœ¼ë¡œ ì„¤êµë¥¼ í†µì—­í•©ë‹ˆë‹¤
                </p>
                
                <div style="position:relative; width:100%; height:70vh; min-height:500px; border-radius:12px; overflow:hidden; box-shadow:0 4px 6px rgba(0,0,0,0.1);">
                    <iframe 
                        src="https://main.sermon-translator-frontend.pages.dev/"
                        style="width:100%; height:100%; border:none;"
                        allow="microphone; camera"
                        title="Sermon Interpreter">
                    </iframe>
                </div>
                
                <div style="margin-top:15px; padding:12px; background:#f0f9ff; border-radius:8px; font-size:0.85rem; color:#0369a1;">
                    <strong id="interpreter-tip-title"
                            data-ko="ğŸ’¡ ì‚¬ìš© ì•ˆë‚´:"
                            data-en="ğŸ’¡ Usage Guide:">ğŸ’¡ ì‚¬ìš© ì•ˆë‚´:</strong>
                    <ul style="margin:8px 0 0 20px; line-height:1.8;">
                        <li id="interpreter-tip1"
                            data-ko="ë§ˆì´í¬ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”"
                            data-en="Please allow microphone permission">ë§ˆì´í¬ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”</li>
                        <li id="interpreter-tip2"
                            data-ko="ì„¤êµ ì‹œì‘ ì „ì— ë¯¸ë¦¬ ì ‘ì†í•˜ì„¸ìš”"
                            data-en="Connect before the sermon starts">ì„¤êµ ì‹œì‘ ì „ì— ë¯¸ë¦¬ ì ‘ì†í•˜ì„¸ìš”</li>
                        <li id="interpreter-tip3"
                            data-ko="ì•ˆì •ì ì¸ ì¸í„°ë„· ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤"
                            data-en="Stable internet connection required">ì•ˆì •ì ì¸ ì¸í„°ë„· ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤</li>
                    </ul>
                </div>
            </div>
            
            <div class="app-footer">
                Created by Pastor Kim & GMC Seattle<br>
                Genesis 1314 - Expanding the Kingdom, One Home at a Time
            </div>
        </div>

    </div>

    <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('journal', this)">
            <div class="nav-icon">ğŸ“–</div>
            <span>ì¼ì§€</span>
        </div>
        <div class="nav-item" onclick="switchTab('mokjang', this)">
            <div class="nav-icon">ğŸ‘¥</div>
            <span>ëª©ì¥</span>
        </div>
        <div class="nav-item" onclick="switchTab('guide', this)">
            <div class="nav-icon">ğŸ“š</div>
            <span>ê°€ì´ë“œ</span>
        </div>
        <div class="nav-item" onclick="switchTab('challenge', this)">
            <div class="nav-icon">ğŸ¯</div>
            <span>21ì¼</span>
        </div>
        <div class="nav-item" onclick="switchTab('interpreter', this)">
            <div class="nav-icon">ğŸ¤</div>
            <span id="nav-interpreter">í†µì—­</span>
        </div>
    </nav>

    <!-- íˆìŠ¤í† ë¦¬ ëª¨ë‹¬ -->
    <div id="historyModal" class="modal-wrap">
        <div class="modal-box">
            <div class="close-btn" onclick="closeHistory()">&times;</div>
            <h3 style="color:var(--navy); margin-bottom:15px;" id="modal-history-title">ì§€ë‚œ ê¸°ë¡ ë³´ê´€ì†Œ</h3>
            <div id="historyList"></div>
        </div>
    </div>

    <!-- ì¼ì§€ ìƒì„¸ë³´ê¸° ëª¨ë‹¬ -->
    <div id="viewModal" class="modal-wrap">
        <div class="modal-box">
            <div class="close-btn" onclick="closeViewModal()">&times;</div>
            <h3 style="color:var(--navy); margin-bottom:5px;" id="v-date">Date</h3>
            <h2 style="font-family:'Noto Serif KR'; margin-bottom:20px;" id="v-ref">Ref</h2>
            <span class="view-label" id="v-lbl1">ğŸ“– ë§ì”€ ë¬µìƒ</span>
            <div class="view-content" id="v-text"></div>
            <span class="view-label" id="v-lbl2">ğŸ‘‚ í•˜ë‚˜ë‹˜ì´ ì£¼ì‹  ë§ˆìŒ</span>
            <div class="view-content" id="v-rhema"></div>
            <span class="view-label" id="v-lbl3">ğŸ‘£ ìˆœì¢…í•  í–‰ë™</span>
            <div class="view-content" id="v-action"></div>
            <span class="view-label" id="v-lbl4">ğŸ™ ê°ì‚¬ ê¸°ë„</span>
            <div class="view-content" id="v-thanks"></div>
            <div class="view-actions">
                <button class="btn-action" style="background:#f1f3f5; color:#ff6b6b;" onclick="deleteCurrentLog()" id="v-btn-del">ì‚­ì œ</button>
                <button class="btn-action" style="background:var(--navy); color:white;" onclick="editCurrentLog()" id="v-btn-edit">ìˆ˜ì •í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <!-- í”„ë¡œí•„ ì„¤ì • ëª¨ë‹¬ -->
    <div id="settingModal" class="modal-wrap">
        <div class="modal-box" style="text-align:center;">
            <div class="close-btn" onclick="closeSettings()">&times;</div>
            <h3 style="margin-bottom:10px; color:var(--navy);" id="setting-modal-title">í”„ë¡œí•„ ì„¤ì •</h3>
            
            <p style="font-size:0.9rem; color:var(--gold); font-weight:700; margin-bottom:15px; line-height:1.5;" id="setting-modal-msg">
                "ëª¨ë“  ê·¸ë¦¬ìŠ¤ë„ì¸ì€ ì‚¬ì—­ììš”, ì„ êµì‚¬ì…ë‹ˆë‹¤."
            </p>
            
            <input type="text" id="setName" placeholder="ì´ë¦„ (ì˜ˆ: ê¹€ì°¬ì–‘)" style="margin-bottom:15px; text-align:center;">
            
            <div class="journey-model">
                <div class="journey-title">ê°€ì •êµíšŒ 4ë‹¨ê³„ ì˜ì  ì—¬ì •</div>
                <div class="journey-stages" id="journeyStages">
                    <div class="stage-item" data-stage="seeker">
                        <div class="stage-num">â‘ </div>
                        <div class="stage-label">ìˆœë¡€ì<br>(VIP)</div>
                    </div>
                    <div class="stage-item" data-stage="believer">
                        <div class="stage-num">â‘¡</div>
                        <div class="stage-label">ì‹ ì</div>
                    </div>
                    <div class="stage-item" data-stage="disciple">
                        <div class="stage-num">â‘¢</div>
                        <div class="stage-label">ì œì</div>
                    </div>
                    <div class="stage-item" data-stage="shepherd">
                        <div class="stage-num">â‘£</div>
                        <div class="stage-label">ëª©ì</div>
                    </div>
                </div>
            </div>
            
            <select id="setJourney" style="width:100%; margin-bottom:10px; text-align:center; padding:12px; border-radius:10px; border:1px solid #e0e0e0; background:#fafafa; font-size:1rem; outline:none;" onchange="onJourneyChange()">
                <option value="seeker">â‘  ìˆœë¡€ì (VIP) - í•˜ë‚˜ë‹˜ì„ ì°¾ê³  ìˆëŠ” ì‚¬ëŒ</option>
                <option value="believer">â‘¡ ì‹ ì - ë³µìŒì„ ë°›ì•„ë“¤ì¸ ì‚¬ëŒ</option>
                <option value="disciple">â‘¢ ì œì - ì˜ˆìˆ˜ë‹˜ì˜ ê°€ë¥´ì¹¨ì„ ë°°ìš°ê³  ë”°ë¥´ëŠ” ì‚¬ëŒ</option>
                <option value="shepherd">â‘£ ëª©ì - ë‹¤ë¥¸ ì‚¬ëŒì„ ëŒë³´ê³  ì œìë¥¼ ì„¸ìš°ëŠ” ì‚¬ëŒ</option>
            </select>
            
            <div id="shepherdDetail" class="shepherd-detail">
                <select id="setShepherdType" style="width:100%; margin-bottom:10px; text-align:center; padding:12px; border-radius:10px; border:1px solid var(--gold); background:#FFF9E6; font-size:1rem; outline:none;">
                    <option value="shepherd">ëª©ì (Shepherd)</option>
                    <option value="moknye">ëª©ë…€ (ëª©ìì˜ ì•„ë‚´)</option>
                    <option value="mokbu">ëª©ë¶€ (ëª©ìì˜ ë‚¨í¸)</option>
                </select>
            </div>
            
            <input type="text" id="setMokjang" placeholder="ëª©ì¥ ì´ë¦„ (ì˜ˆ: íŒŒë¦¬ ëª©ì¥)" style="margin-bottom:15px; text-align:center;">
            
            <button class="btn" onclick="saveSettings()">ì €ì¥í•˜ê¸°</button>
        </div>
    </div>

    <!-- ëª©ì¥ ì„¤ì • ëª¨ë‹¬ -->
    <div id="mokjangSetupModal" class="modal-wrap">
        <div class="modal-box">
            <div class="close-btn" onclick="closeMokjangSetup()">&times;</div>
            <h3 style="color:var(--navy); margin-bottom:10px;" id="mokjang-setup-title">ëª©ì¥ ì„¤ì •</h3>
            <p style="font-size:0.9rem; color:#666; margin-bottom:15px; line-height:1.5;" id="mokjang-setup-desc">
                ëª©ì¥ ì½”ë“œë¥¼ ì…ë ¥í•˜ë©´ ëª©ì¥ ì‹êµ¬ë“¤ê³¼ í•¨ê»˜ ì§„í–‰ ìƒí™©ì„ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>
            <input type="text" id="inputMokjangCode" placeholder="ì˜ˆ: 1MOKJANG" style="text-transform:uppercase; margin-bottom:10px;">
            <p style="font-size:0.75rem; color:#999; margin-bottom:15px;" id="mokjang-setup-help">
                * ëª©ìë‹˜ê»˜ ëª©ì¥ ì½”ë“œë¥¼ ë¬¸ì˜í•˜ì„¸ìš”
            </p>
            <button class="btn" onclick="joinMokjang()" id="mokjang-join-btn">ì°¸ì—¬í•˜ê¸°</button>
        </div>
    </div>

    <!-- í† ìŠ¤íŠ¸ -->
    <div id="toast"></div>

    <script>
        // Firebase ì„¤ì • (ì‹¤ì œ ì‚¬ìš©ì‹œ ì •ë³´ ì…ë ¥)
        // const firebaseConfig = { ... };
        // firebase.initializeApp(firebaseConfig);
        // const database = firebase.database();

        // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ í‚¤
        const DB_KEY = 'galtar_1314_v14_journal';
        const CHALLENGE_KEY = 'galtar_1314_challenge_v1';
        const CHALLENGE_STARTED_KEY = 'galtar_1314_challenge_started';
        const CHIME_ENABLED_KEY = 'galtar_1314_chime_enabled';
        
        let curLang = 'ko';
        let editId = null, viewId = null;
        let timerInterval, timeLeft = 15 * 60, isTimerRunning = false;
        let chimeEnabled = true; // ê¸°ë³¸ê°’: ì°¨ì„ë²¨ ì¼œì§
        let audioCtx = null; // ì „ì—­ ì˜¤ë””ì˜¤ ì»¨í…ìŠ¤íŠ¸ (ëª¨ë°”ì¼ ëŒ€ì‘)

        // ë‹¤êµ­ì–´
        const lang = {
            ko: {
                church: "ì‹œì• í‹€ì§€êµ¬ì´ŒêµíšŒ", 
                subtitle: "í•˜ë‚˜ë‹˜ì˜ ìŒì„±ì´ ë“¤ë¦¬ëŠ” ê·€",
                
                // ì˜ì  ì—¬ì •
                journey_seeker: "ìˆœë¡€ì (VIP)", 
                journey_believer: "ì‹ ì", 
                journey_disciple: "ì œì", 
                journey_shepherd: "ëª©ì",
                journey_moknye: "ëª©ë…€",
                journey_mokbu: "ëª©ë¶€",
                
                desc_seeker: "í•˜ë‚˜ë‹˜ì„ ì°¾ê³  ìˆëŠ” ì‚¬ëŒ",
                desc_believer: "ë³µìŒì„ ë°›ì•„ë“¤ì¸ ì‚¬ëŒ",
                desc_disciple: "ì˜ˆìˆ˜ë‹˜ì˜ ê°€ë¥´ì¹¨ì„ ë°°ìš°ê³  ë”°ë¥´ëŠ” ì‚¬ëŒ",
                desc_shepherd: "ë‹¤ë¥¸ ì‚¬ëŒì„ ëŒë³´ê³  ì œìë¥¼ ì„¸ìš°ëŠ” ì‚¬ëŒ",
                
                stage1: "ìˆœë¡€ì<br>(VIP)", stage2: "ì‹ ì", stage3: "ì œì", stage4: "ëª©ì",
                
                // ë£¨í‹´ ë°°ë„ˆ
                r1: "ë§ì”€ ë¬µìƒ", time1: "10ë¶„", 
                r2: "ì¹¨ë¬µ ê¸°ë„", time2: "15ë¶„", 
                r3: "ê²½ì²­ ë…¸íŠ¸", time3: "5ë¶„",
                verse: "\"ë“¤ì„ ê·€ ìˆëŠ” ìëŠ” ë“¤ìœ¼ë¼!\" (ë§‰ 4:9)",
                
                // íƒ­ ë„¤ë¹„ê²Œì´ì…˜
                tab_journal: "ì¼ì§€",
                tab_challenge: "21ì¼",
                tab_mokjang: "ëª©ì¥",
                tab_guide: "ê°€ì´ë“œ",
                tab_interpreter: "í†µì—­",
                
                // ì¼ì§€ íƒ­
                card1: "ë§ì”€ ë¬µìƒ (10ë¶„)",
                ph_ref: "ì˜¤ëŠ˜ì˜ ë³¸ë¬¸",
                ph_text: "ë¬µìƒí•œ ë§ì”€ì„ ê¸°ë¡í•˜ì„¸ìš”",
                card2: "ì¹¨ë¬µ ê¸°ë„ (15ë¶„)",
                btn_start: "íƒ€ì´ë¨¸ ì‹œì‘",
                btn_pause: "ì¼ì‹œì •ì§€",
                btn_resume: "ê³„ì†í•˜ê¸°",
                msg_timer: "ë‚´ ìƒê°ì˜ ì†Œë¦¬ë¥¼ ë„˜ê³  í•˜ë‚˜ë‹˜ì˜ ìŒì„±ì„ ë“£ìŠµë‹ˆë‹¤",
                chime_info: "ğŸ”” ì°¨ì„ë²¨: 5ë¶„(ë‚®ì€ ìŒ), 10ë¶„(ì¤‘ê°„ ìŒ 2ë²ˆ), 15ë¶„(ë†’ì€ ìŒ)",
                chime_on: "ON",
                chime_off: "OFF",
                card3: "ê²½ì²­ ë…¸íŠ¸ (5ë¶„)",
                l1: "1. í•˜ë‚˜ë‹˜ì´ ì£¼ì‹  ë§ˆìŒ",
                ph_rhema: "ì£¼ë‹˜ì´ ë‚´ê²Œ ì£¼ì‹  ê¹¨ë‹¬ìŒ",
                l2: "2. ìˆœì¢…í•  í–‰ë™",
                ph_action: "ì´ë²ˆ ì£¼ ì‹¤ì²œí•  êµ¬ì²´ì  í–‰ë™",
                l3: "3. ê°ì‚¬ ê¸°ë„",
                ph_thanks: "ì£¼ë‹˜ê»˜ ë“œë¦¬ëŠ” ê°ì‚¬",
                btn_save: "ì™„ë£Œ",
                btn_update: "ìˆ˜ì • ì™„ë£Œ",
                btn_hist: "ê¸°ë¡ ë³´ê¸°",
                
                // 21ì¼ ì±Œë¦°ì§€
                challenge_title: "21ì¼ ê²½ì²­ í›ˆë ¨",
                challenge_start_title: "21ì¼ ê²½ì²­ í›ˆë ¨",
                challenge_start_desc: "í•˜ë‚˜ë‹˜ì˜ ìŒì„±ì´ ë“¤ë¦¬ëŠ” ê·€ë¥¼ íšŒë³µí•˜ëŠ”<br>ì˜ì  í›ˆë ¨ì— ì°¸ì—¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                challenge_start_btn: "ğŸ¯ 21ì¼ ì±Œë¦°ì§€ ì‹œì‘í•˜ê¸°",
                challenge_progress: "ì¼ ì™„ë£Œ / 21ì¼",
                challenge_share: "ğŸ“¢ ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ì§„í–‰ ìƒí™© ê³µìœ í•˜ê¸°",
                challenge_reset: "ğŸ”„ ì±Œë¦°ì§€ ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",
                
                // 21ì¼ êµ¬ì„±
                week1_title: "1ì£¼ì°¨: ê·€ì˜ í• ë¡€ (ì„¸ìƒì˜ ì†ŒìŒ ì¤„ì´ê¸°)",
                week2_title: "2ì£¼ì°¨: ê±°ë£©í•œ ê³µëª… (ë§ì”€ê³¼ ìƒí˜¸ì‘ìš©)",
                week3_title: "3ì£¼ì°¨: ë§ì”€ì˜ ì„±ìœ¡ì‹  (ì‚¶ìœ¼ë¡œ ì‹¤ì²œí•˜ê¸°)",
                
                challenge_structure: "ğŸ“š 21ì¼ êµ¬ì„±",
                week1_desc: "ê·€ì˜ í• ë¡€ (ì„¸ìƒ ì†ŒìŒ ì¤„ì´ê¸°)",
                week2_desc: "ê±°ë£©í•œ ê³µëª… (ë§ì”€ê³¼ ìƒí˜¸ì‘ìš©)",
                week3_desc: "ë§ì”€ì˜ ì„±ìœ¡ì‹  (ì‚¶ìœ¼ë¡œ ì‹¤ì²œ)",
                
                // Day ì œëª© (1-7)
                day1: "[ì‹œê°„ ì •ë³µ] í† ìš”ì¼ ë°¤ 10ì‹œ ì´í›„ ë¯¸ë””ì–´ ë„ê¸°",
                day2: "[ê³µê°„ ì •ë³µ] ì§‘ì¤‘ ì˜ ë˜ëŠ” ìë¦¬ ì„ íƒí•˜ê¸°",
                day3: "[ë§ˆìŒ ì •ë³µ] ì˜ˆë°° ì „ 5ë¶„ ê¸°ë„ 10ë²ˆ ê³ ë°±",
                day4: "[ë¹„íŒ ê¸ˆì‹] ì„¤êµì í‰ê°€í•˜ì§€ ì•Šê¸°",
                day5: "[ë¯¸ë””ì–´ ê¸ˆì‹] ì˜ˆë°° ê°€ëŠ” ê¸¸ ì°¬ì–‘ ë“£ê¸°",
                day6: "[ê¸°ë„ ì‹¬ê¸°] ëª©ì‚¬ë‹˜ ì¤‘ë³´ê¸°ë„ 3ë¶„",
                day7: "[ì°¸íšŒí•˜ê¸°] ì§€ë‚œì£¼ ë¶ˆìˆœì¢… íšŒê°œí•˜ê¸°",
                
                // Day ì œëª© (8-14)
                day8: "[ì•„ì´ì»¨íƒ] ì„¤êµìì™€ ëˆˆ ë§ì¶”ë©° ê³ ê°œ ë„ë•ì´ê¸°",
                day9: "[ë ˆë§ˆ ê¸°ë¡] í•µì‹¬ ë¬¸ì¥ í•˜ë‚˜ë§Œ êµµê²Œ ì ê¸°",
                day10: "[ì•„ë©˜ í›ˆë ¨] ì‘ì€ ì†Œë¦¬ë¡œë¼ë„ \"ì•„ë©˜\" í™”ë‹µí•˜ê¸°",
                day11: "[ì˜ì  ì¤‘ë³´] ì„¤êµì ìœ„í•´ ì¤‘ë³´ê¸°ë„í•˜ê¸°",
                day12: "[ì¹¨ë¬µ ë¬µìƒ] ì¶•ë„ í›„ 3ë¶„ê°„ ë§ì”€ ë˜ìƒˆê¸°ê¸°",
                day13: "[ì„±ê²½ í™•ì¸] ì£¼ì¼ ë³¸ë¬¸ ì§‘ì—ì„œ ì†Œë¦¬ë‚´ì–´ ì½ê¸°",
                day14: "[ê°ì‚¬ í‘œí˜„] ë§ì”€ì— ëŒ€í•´ ê°ì‚¬ê¸°ë„ ë“œë¦¬ê¸°",
                
                // Day ì œëª© (15-21)
                day15: "[í•œ ì¤„ ìš”ì•½] ë§ì”€ì„ í•œ ë¬¸ì¥ìœ¼ë¡œ ìš”ì•½í•˜ê¸°",
                day16: "[ì…ìˆ  ì „íŒŒ] ê°€ì¡±/ëª©ì¥ì— ì€í˜œ ë‚˜ëˆ„ê¸°",
                day17: "[ì†í•´ ê°ìˆ˜] ìˆœì¢… ìœ„í•´ êµ¬ì²´ì  ì†í•´ ê°ìˆ˜í•˜ê¸°",
                day18: "[ìˆœì¢… ì ê²€] ê²°ë‹¨ ë‚´ìš© ì§€ì¼°ëŠ”ì§€ ì²´í¬í•˜ê¸°",
                day19: "[ê²©ë ¤í•˜ê¸°] ëª©ì‚¬ë‹˜ê»˜ ìˆœì¢… ê°„ì¦ í¸ì§€ ë³´ë‚´ê¸°",
                day20: "[ë‚˜ëˆ”ì˜ ë°¤] í›ˆë ¨ ì¤‘ ëŠë‚€ ë³€í™” ë‚˜ëˆ„ê¸°",
                day21: "[ì„œì•½ì‹] í‰ìƒ ê²½ì²­í•˜ëŠ” ì˜ˆë°°ì ë˜ê¸° ì„œì•½",
                
                // ëª©ì¥
                mokjang_setup_title: "ğŸ‘¥ ëª©ì¥ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤",
                mokjang_setup_desc: "ëª©ì¥ ì‹êµ¬ë“¤ê³¼ í•¨ê»˜ 21ì¼ì„ ì™„ì£¼í•˜ì„¸ìš”!",
                mokjang_setup_btn: "ëª©ì¥ ì„¤ì •í•˜ê¸°",
                mokjang_what_title: "ğŸ’¡ ëª©ì¥ ê¸°ëŠ¥ì´ë€?",
                mokjang_what_desc: "ëª©ì¥ ì½”ë“œë¥¼ ì…ë ¥í•˜ë©´ ëª©ì¥ ì‹êµ¬ë“¤ì˜ 21ì¼ ì±Œë¦°ì§€ ì§„í–‰ ìƒí™©(ì™„ë£Œ ì—¬ë¶€)ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°œì¸ ì¼ì§€ ë‚´ìš©ì€ ì™„ì „íˆ ë¹„ê³µê°œì´ë©°, ì˜¤ì§ ì™„ë£Œ ì—¬ë¶€(O/X)ë§Œ ê³µìœ ë©ë‹ˆë‹¤.",
                mokjang_completed: "ëª… ì˜¤ëŠ˜ ì™„ë£Œ",
                mokjang_encourage_title: "ğŸ’¬ ê²©ë ¤ ë©”ì‹œì§€",
                mokjang_encourage_msg: "í•¨ê»˜ ë‹¬ë ¤ê°€ëŠ” ìš°ë¦¬ ëª©ì¥ ì‹êµ¬ë“¤ì„ ìœ„í•´ ê¸°ë„í•©ë‹ˆë‹¤ ğŸ™",
                mokjang_leave: "ëª©ì¥ ë‚˜ê°€ê¸°",
                mokjang_modal_title: "ëª©ì¥ ì„¤ì •",
                mokjang_modal_desc: "ëª©ì¥ ì½”ë“œë¥¼ ì…ë ¥í•˜ë©´ ëª©ì¥ ì‹êµ¬ë“¤ê³¼ í•¨ê»˜ ì§„í–‰ ìƒí™©ì„ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                mokjang_code_ph: "ì˜ˆ: 1MOKJANG",
                mokjang_code_help: "* ëª©ìë‹˜ê»˜ ëª©ì¥ ì½”ë“œë¥¼ ë¬¸ì˜í•˜ì„¸ìš”",
                mokjang_join: "ì°¸ì—¬í•˜ê¸°",
                
                // ê°€ì´ë“œ
                guide_title: "ğŸ“š ê²½ì²­ ê°€ì´ë“œ",
                guide_why_title: "ğŸ’¡ ì™œ 'ë“£ëŠ” ê¸°ë„'ì¸ê°€ìš”?",
                guide_why_desc: "ê²½ì²­ê¸°ë„ëŠ” ì‹ ë¹„ì£¼ì˜ê°€ ì•„ë‹™ë‹ˆë‹¤.<br><strong>\"ë‚´ ì–‘ì€ ë‚´ ìŒì„±ì„ ë“¤ìœ¼ë©°\"</strong> (ìš” 10:27) í•˜ì‹  ì˜ˆìˆ˜ë‹˜ì˜ ë§ì”€ì²˜ëŸ¼, ëª©ìì´ì‹  ì£¼ë‹˜ì˜ ëœ»ì„ ë“£ê³  <strong>ìˆœì¢…í•˜ê¸° ìœ„í•œ í›ˆë ¨</strong>ì…ë‹ˆë‹¤.",
                guide_lordsprayer: "ì£¼ê¸°ë„ë¬¸ìœ¼ë¡œ í•˜ëŠ” ê²½ì²­ë²• (5 Step)",
                guide_step1_title: "í•˜ëŠ˜ì— ê³„ì‹  ìš°ë¦¬ ì•„ë²„ì§€",
                guide_step1_desc: "ë©ˆì¶”ì„¸ìš”(Stop). ê·¸ë¦¬ê³  ë‚˜ë¥¼ ë¶€ë¥´ì‹œëŠ” ì•„ë²„ì§€ì˜ ì‚¬ë‘ ì•ˆì—ì„œ í‰ì•ˆì„ ëˆ„ë¦¬ì„¸ìš”.",
                guide_step2_title: "ë‚˜ë¼ê°€ ì„í•˜ì‹œì˜¤ë©°",
                guide_step2_desc: "ë‚´ ê³„íšì„ ë‚´ë ¤ë†“ê³ , ì˜¤ëŠ˜ ë‚´ ê°€ì •ê³¼ ì¼í„°ì— ì„í•˜ì‹¤ í•˜ë‚˜ë‹˜ì˜ ëœ»ì„ ë¬¼ìœ¼ì„¸ìš”.",
                guide_step3_title: "ì¼ìš©í•  ì–‘ì‹ì„ ì£¼ì˜µì‹œê³ ",
                guide_step3_desc: "ì˜¤ëŠ˜ ì£¼ì‹  ë§ì”€(QT)ì„ í´ì„¸ìš”. ë§ì”€ ë°–ì˜ ìŒì„±ì€ ìœ„í—˜í•©ë‹ˆë‹¤. ì„±ê²½ì„ í†µí•´ ë“¤ìœ¼ì„¸ìš”.",
                guide_step4_title: "ìš°ë¦¬ê°€ ìš°ë¦¬ì—ê²Œ ì£„ ì§€ì€ ìë¥¼...",
                guide_step4_desc: "ë§ˆìŒì— ê±¸ë¦¬ëŠ” ê´€ê³„ë‚˜ ì£„ê°€ ìˆë‚˜ìš”? ì„±ë ¹ë‹˜ê»˜ ë¬»ê³  íšŒê°œí•˜ë©° ë§ˆìŒì„ ì •ê²°ì¼€ í•˜ì„¸ìš”.",
                guide_step5_title: "ë‚˜ë¼ì™€ ê¶Œì„¸ì™€ ì˜ê´‘ì´...",
                guide_step5_desc: "ë“¤ì€ ë§ì”€ì— ìˆœì¢…í•˜ê¸°ë¡œ ê²°ë‹¨í•˜ë©°, ì°¬ì–‘ìœ¼ë¡œ ê¸°ë„ë¥¼ ë§ˆì¹˜ì„¸ìš”.",
                guide_principle: "\"ë§ì”€(Logos)ìœ¼ë¡œ ê²€ì¦í•˜ê³ ,<br>ì„±ë ¹(Pneuma)ìœ¼ë¡œ ê°ë™ë°›ì•„,<br>ì‚¶ìœ¼ë¡œ ìˆœì¢…(Obey)í•©ë‹ˆë‹¤.\"",
                guide_selfcheck_title: "ğŸ“– ìê°€ ì§„ë‹¨ (8ë¬¸í•­)",
                guide_selfcheck_desc: "ì§€ë‚œ ì£¼ì¼ ì˜ˆë°°ë¥¼ ë– ì˜¬ë¦¬ë©° ì†”ì§í•˜ê²Œ ì²´í¬í•´ë³´ì„¸ìš”. (ê° ë¬¸í•­ 1~5ì )",
                guide_selfcheck_q1: "1. ì˜ˆë°° 10ë¶„ ì „ì— ë„ì°©í•˜ì—¬ ê¸°ë„ë¡œ ë§ˆìŒ ë°­ì„ ê¸°ê²½í–ˆëŠ”ê°€?",
                guide_selfcheck_q2: "2. ì„¸ìƒì˜ ì—¼ë ¤ë¥¼ ëŠì–´ë‚´ê³  ë§ì”€ì„ ì‚¬ëª¨í•¨ìœ¼ë¡œ ì¤€ë¹„í–ˆëŠ”ê°€?",
                guide_selfcheck_q3: "3. ì„¤êµ ì¤‘ ì§‘ì¤‘í–ˆëŠ”ê°€?",
                guide_selfcheck_q4: "4. ë”´ìƒê°ì„ ì˜ì§€ì ìœ¼ë¡œ ëŠì–´ëƒˆëŠ”ê°€?",
                guide_selfcheck_q5: "5. ì±…ë§ì˜ ë§ì”€ë„ \"ì•„ë©˜\"ìœ¼ë¡œ ë°›ì•˜ëŠ”ê°€?",
                guide_selfcheck_q6: "6. ë©”ì‹œì§€ì˜ ë³¸ì§ˆì— ê·€ ê¸°ìš¸ì˜€ëŠ”ê°€?",
                guide_selfcheck_q7: "7. ì‹¤ì²œí•  í•œ ê°€ì§€ë¥¼ ì •í–ˆëŠ”ê°€?",
                guide_selfcheck_q8: "8. ì£¼ì¤‘ì— ì‹¤ì œ ì‚¶ì—ì„œ ì ìš©í–ˆëŠ”ê°€?",
                guide_scoring: "<strong>35-40ì :</strong> ì˜¥í†  | <strong>25-34ì :</strong> ì„±ì¥ ì¤‘ | <strong>24ì  ì´í•˜:</strong> í›ˆë ¨ í•„ìš”",
                
                // ì„¤ì •
                modal_title: "í”„ë¡œí•„ ì„¤ì •",
                modal_msg: "\"ëª¨ë“  ê·¸ë¦¬ìŠ¤ë„ì¸ì€ ì‚¬ì—­ììš”, ì„ êµì‚¬ì…ë‹ˆë‹¤.\"",
                modal_btn: "ì €ì¥í•˜ê¸°",
                ph_name: "ì´ë¦„ (ì˜ˆ: ê¹€ì°¬ì–‘)",
                ph_mokjang: "ëª©ì¥ ì´ë¦„ (ì˜ˆ: íŒŒë¦¬ ëª©ì¥)",
                journey_title: "ê°€ì •êµíšŒ 4ë‹¨ê³„ ì˜ì  ì—¬ì •",
                opt_shepherd: "ëª©ì (Shepherd)",
                opt_moknye: "ëª©ë…€ (ëª©ìì˜ ì•„ë‚´)",
                opt_mokbu: "ëª©ë¶€ (ëª©ìì˜ ë‚¨í¸)",
                
                // ê¸°ë³¸ í”„ë¡œí•„ í…ìŠ¤íŠ¸
                default_profile: "í”„ë¡œí•„ ì„¤ì •",
                default_role: "ìˆœë¡€ì",
                
                // íˆìŠ¤í† ë¦¬
                list_title: "ì§€ë‚œ ê¸°ë¡ ë³´ê´€ì†Œ",
                empty_list: "ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤",
                
                // View ëª¨ë‹¬ ë¼ë²¨
                v_lbl1: "ğŸ“– ë§ì”€ ë¬µìƒ",
                v_lbl2: "ğŸ‘‚ í•˜ë‚˜ë‹˜ì´ ì£¼ì‹  ë§ˆìŒ",
                v_lbl3: "ğŸ‘£ ìˆœì¢…í•  í–‰ë™",
                v_lbl4: "ğŸ™ ê°ì‚¬ ê¸°ë„",
                btn_del: "ì‚­ì œ",
                btn_edit: "ìˆ˜ì •í•˜ê¸°",
                
                // ë©”ì‹œì§€
                msg_save: "ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤",
                msg_update: "ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤",
                msg_del: "ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤",
                msg_empty: "ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”",
                msg_confirm_del: "ì´ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                msg_timer_end: "ê¸°ë„ ì‹œê°„ì´ ëë‚¬ìŠµë‹ˆë‹¤",
                msg_challenge_start: "ì±Œë¦°ì§€ ì‹œì‘! í•¨ê»˜ ì™„ì£¼í•´ë´ìš” ğŸ’ª",
                msg_challenge_complete: "ì™„ë£Œ",
                msg_challenge_cancel: "ì™„ë£Œ ì·¨ì†Œë¨",
                msg_challenge_reset: "ì±Œë¦°ì§€ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œì‘í•´ë³´ì„¸ìš”!",
                msg_mokjang_joined: "ëª©ì¥ì— ì°¸ì—¬í–ˆìŠµë‹ˆë‹¤!",
                msg_mokjang_left: "ëª©ì¥ì—ì„œ ë‚˜ì™”ìŠµë‹ˆë‹¤",
                msg_mokjang_code_required: "ëª©ì¥ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”",
                msg_name_required: "ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”",
                msg_clipboard: "ë©”ì‹œì§€ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤"
            },
            en: {
                church: "Global Mission Church of Greater Seattle", 
                subtitle: "The Ear that Hears God's Voice",
                
                // Spiritual Journey
                journey_seeker: "Seeker (VIP)", 
                journey_believer: "Believer", 
                journey_disciple: "Disciple", 
                journey_shepherd: "Shepherd",
                journey_moknye: "Moknyeo (Wife)",
                journey_mokbu: "Mokbu (Husband)",
                
                desc_seeker: "Seeking God",
                desc_believer: "Accepted the Gospel",
                desc_disciple: "Learning and following Jesus",
                desc_shepherd: "Caring for others and making disciples",
                
                stage1: "Seeker<br>(VIP)", stage2: "Believer", stage3: "Disciple", stage4: "Shepherd",
                
                // Routine Banner
                r1: "Scripture", time1: "10min", 
                r2: "Silence", time2: "15min", 
                r3: "Journal", time3: "5min",
                verse: "\"Whoever has ears, let them hear!\" (Mark 4:9)",
                
                // Tab Navigation
                tab_journal: "Journal",
                tab_challenge: "21 Days",
                tab_mokjang: "Mokjang",
                tab_guide: "Guide",
                tab_interpreter: "Interpret",
                
                // Journal Tab
                card1: "Scripture (10min)",
                ph_ref: "Scripture Reference",
                ph_text: "Write your meditation...",
                card2: "Silence (15min)",
                btn_start: "Start Timer",
                btn_pause: "Pause",
                btn_resume: "Resume",
                msg_timer: "Turning off the noise to hear God's voice",
                chime_info: "ğŸ”” Chimes: 5min(low), 10min(mid x2), 15min(high)",
                chime_on: "ON",
                chime_off: "OFF",
                card3: "Journal (5min)",
                l1: "1. God's Voice (Rhema)",
                ph_rhema: "Insights received from the Lord",
                l2: "2. Action to Obey",
                ph_action: "Specific action this week",
                l3: "3. Thanksgiving",
                ph_thanks: "Prayer of thanksgiving",
                btn_save: "Complete",
                btn_update: "Update",
                btn_hist: "View History",
                
                // 21-Day Challenge
                challenge_title: "21-Day Listening Training",
                challenge_start_title: "21-Day Listening Training",
                challenge_start_desc: "Will you join this spiritual training<br>to restore ears that hear God's voice?",
                challenge_start_btn: "ğŸ¯ Start 21-Day Challenge",
                challenge_progress: "days completed / 21 days",
                challenge_share: "ğŸ“¢ Share progress on KakaoTalk",
                challenge_reset: "ğŸ”„ Restart Challenge",
                
                // 21-Day Structure
                week1_title: "Week 1: Circumcision of the Ear (Reducing Noise)",
                week2_title: "Week 2: Holy Resonance (Interacting with the Word)",
                week3_title: "Week 3: Incarnation of the Word (Living it Out)",
                
                challenge_structure: "ğŸ“š 21-Day Structure",
                week1_desc: "Circumcision of the Ear (Reduce noise)",
                week2_desc: "Holy Resonance (Interact with Word)",
                week3_desc: "Incarnation of Word (Live it out)",
                
                // Day Titles (1-7)
                day1: "[Time] Turn off media after 10pm Saturday",
                day2: "[Space] Choose a seat for better focus",
                day3: "[Heart] Pray 10 times before worship",
                day4: "[Fast] Don't judge the preacher",
                day5: "[Media] Listen to worship on the way",
                day6: "[Prayer] Pray 3 min for pastor",
                day7: "[Repent] Confess last week's disobedience",
                
                // Day Titles (8-14)
                day8: "[Eye Contact] Look at preacher, nod in agreement",
                day9: "[Rhema] Write one key sentence boldly",
                day10: "[Amen] Say 'Amen' out loud",
                day11: "[Intercession] Pray for the preacher",
                day12: "[Silence] Meditate 3 min after benediction",
                day13: "[Scripture] Read Sunday's text aloud at home",
                day14: "[Thanks] Give thanks for the Word",
                
                // Day Titles (15-21)
                day15: "[Summary] Summarize in one sentence",
                day16: "[Share] Share grace with family/mokjang",
                day17: "[Cost] Bear specific cost for obedience",
                day18: "[Check] Check if you kept your decision",
                day19: "[Encourage] Write testimony to pastor",
                day20: "[Fellowship] Share changes during training",
                day21: "[Vow] Vow to be lifelong listener",
                
                // Mokjang
                mokjang_setup_title: "ğŸ‘¥ Mokjang Setup Required",
                mokjang_setup_desc: "Complete 21 days with your mokjang members!",
                mokjang_setup_btn: "Set Up Mokjang",
                mokjang_what_title: "ğŸ’¡ What is Mokjang Feature?",
                mokjang_what_desc: "Enter mokjang code to see members' 21-day progress (completion only). Journal content is completely private. Only completion status (O/X) is shared.",
                mokjang_completed: "completed today",
                mokjang_encourage_title: "ğŸ’¬ Encouragement",
                mokjang_encourage_msg: "Praying for our mokjang members running together ğŸ™",
                mokjang_leave: "Leave Mokjang",
                mokjang_modal_title: "Mokjang Setup",
                mokjang_modal_desc: "Enter mokjang code to share progress with members.",
                mokjang_code_ph: "e.g., 1MOKJANG",
                mokjang_code_help: "* Ask your shepherd for mokjang code",
                mokjang_join: "Join",
                
                // Guide
                guide_title: "ğŸ“š Listening Guide",
                guide_why_title: "ğŸ’¡ Why 'Listening Prayer'?",
                guide_why_desc: "Listening prayer is not mysticism.<br><strong>\"My sheep listen to my voice\"</strong> (John 10:27). It's training to hear and <strong>obey</strong> the Shepherd's will.",
                guide_lordsprayer: "Listening with Lord's Prayer (5 Steps)",
                guide_step1_title: "Our Father in heaven",
                guide_step1_desc: "Stop. Rest in the Father's love who calls you.",
                guide_step2_title: "Your kingdom come",
                guide_step2_desc: "Lay down your plans. Ask God's will for your home and workplace today.",
                guide_step3_title: "Give us today our daily bread",
                guide_step3_desc: "Open today's Scripture (QT). Voices outside Scripture are dangerous. Hear through the Bible.",
                guide_step4_title: "Forgive us our debts...",
                guide_step4_desc: "Any relationship or sin troubling you? Ask the Spirit, repent, and purify your heart.",
                guide_step5_title: "For yours is the kingdom...",
                guide_step5_desc: "Decide to obey the Word you heard. End prayer with praise.",
                guide_principle: "\"Verify with Word (Logos),<br>Be moved by Spirit (Pneuma),<br>Obey in life.\"",
                guide_selfcheck_title: "ğŸ“– Self-Check (8 Questions)",
                guide_selfcheck_desc: "Think about last Sunday's worship honestly. (1-5 points each)",
                guide_selfcheck_q1: "1. Arrived 10 min early and prepared heart with prayer?",
                guide_selfcheck_q2: "2. Cut off worldly worries and longed for the Word?",
                guide_selfcheck_q3: "3. Stayed focused during sermon?",
                guide_selfcheck_q4: "4. Deliberately cut off wandering thoughts?",
                guide_selfcheck_q5: "5. Accepted even rebuking words with 'Amen'?",
                guide_selfcheck_q6: "6. Listened to essence of message?",
                guide_selfcheck_q7: "7. Decided one thing to practice?",
                guide_selfcheck_q8: "8. Applied it in actual life during the week?",
                guide_scoring: "<strong>35-40:</strong> Good Soil | <strong>25-34:</strong> Growing | <strong>24-:</strong> Training Needed",
                
                // Settings
                modal_title: "Profile Settings",
                modal_msg: "\"Every Christian is a minister and missionary.\"",
                modal_btn: "Save",
                ph_name: "Name (e.g., John Kim)",
                ph_mokjang: "Mokjang Name (e.g., Paris Mokjang)",
                journey_title: "House Church 4-Stage Spiritual Journey",
                opt_shepherd: "Shepherd",
                opt_moknye: "Moknyeo (Shepherd's Wife)",
                opt_mokbu: "Mokbu (Shepherd's Husband)",
                
                // Default Profile Text
                default_profile: "Profile Settings",
                default_role: "Seeker",
                
                // History
                list_title: "Journal History",
                empty_list: "No records found",
                
                // View Modal Labels
                v_lbl1: "ğŸ“– Scripture",
                v_lbl2: "ğŸ‘‚ God's Voice",
                v_lbl3: "ğŸ‘£ Action",
                v_lbl4: "ğŸ™ Thanksgiving",
                btn_del: "Delete",
                btn_edit: "Edit",
                
                // Messages
                msg_save: "Saved successfully",
                msg_update: "Updated successfully",
                msg_del: "Deleted",
                msg_empty: "Please enter content",
                msg_confirm_del: "Delete this record?",
                msg_timer_end: "Prayer time is over",
                msg_challenge_start: "Challenge started! Let's finish together ğŸ’ª",
                msg_challenge_complete: "Completed",
                msg_challenge_cancel: "Completion cancelled",
                msg_challenge_reset: "Challenge reset. Start again!",
                msg_mokjang_joined: "Joined mokjang!",
                msg_mokjang_left: "Left mokjang",
                msg_mokjang_code_required: "Please enter mokjang code",
                msg_name_required: "Please enter name",
                msg_clipboard: "Message copied"
            }
        };

        // ì•± ì´ˆê¸°í™”
        window.onload = function() {
            loadSettings();
            renderHistory();
            checkChallengeStatus();
            checkMokjangStatus();
            loadChimeSettings();
            updateText();
        };

        // ì–¸ì–´ ì „í™˜
        function toggleLang() {
            console.log('toggleLang called, current:', curLang);
            curLang = curLang === 'ko' ? 'en' : 'ko';
            console.log('toggleLang changed to:', curLang);
            document.getElementById('langBtn').innerText = curLang === 'ko' ? 'ENG' : 'í•œê¸€';
            
            // ë””ë²„ê¹…: ì–¸ì–´ ë³€ê²½ í™•ì¸
            const t = lang[curLang];
            console.log('Question 1:', t.guide_selfcheck_q1);
            
            try {
                updateText();
                console.log('updateText completed successfully');
            } catch(error) {
                console.error('updateText error:', error);
                alert('Language change error: ' + error.message);
            }
        }

        // ëª¨ë“  í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
        function updateText() {
            const t = lang[curLang];
            console.log('updateText called, lang:', curLang);
            
            // ì•ˆì „í•œ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
            function safeUpdate(id, value, isPlaceholder = false) {
                const el = document.getElementById(id);
                if(el) {
                    if(isPlaceholder) el.placeholder = value;
                    else {
                        console.log('Updating', id, 'to:', value);
                        el.innerHTML = value;  // innerText â†’ innerHTML ë³€ê²½
                    }
                } else {
                    console.warn('Element not found:', id);
                }
            }
            
            // í—¤ë”
            safeUpdate('t-church', t.church);
            safeUpdate('t-subtitle', t.subtitle);
            
            // ë£¨í‹´ ë°°ë„ˆ
            safeUpdate('t-r1', t.r1);
            safeUpdate('t-time1', t.time1);
            safeUpdate('t-r2', t.r2);
            safeUpdate('t-time2', t.time2);
            safeUpdate('t-r3', t.r3);
            safeUpdate('t-time3', t.time3);
            safeUpdate('t-verse', t.verse);
            
            // íƒ­ ë„¤ë¹„ê²Œì´ì…˜ (ìˆœì„œ: ì¼ì§€ â†’ ëª©ì¥ â†’ ê°€ì´ë“œ â†’ 21ì¼ â†’ í†µì—­)
            const navItems = document.querySelectorAll('.nav-item span');
            if(navItems[0]) navItems[0].innerText = t.tab_journal;
            if(navItems[1]) navItems[1].innerText = t.tab_mokjang;
            if(navItems[2]) navItems[2].innerText = t.tab_guide;
            if(navItems[3]) navItems[3].innerText = t.tab_challenge;
            if(navItems[4]) navItems[4].innerText = t.tab_interpreter;
            
            // ì¼ì§€ íƒ­
            safeUpdate('t-card1', t.card1);
            safeUpdate('inRef', t.ph_ref, true);
            safeUpdate('inText', t.ph_text, true);
            safeUpdate('t-card2', t.card2);
            
            const timerBtn = document.getElementById('t-timer-btn');
            if(timerBtn) {
                if (!isTimerRunning && timeLeft === 15 * 60) timerBtn.innerText = t.btn_start;
                else if (isTimerRunning) timerBtn.innerText = t.btn_pause;
                else timerBtn.innerText = t.btn_resume;
            }
            
            safeUpdate('t-timer-msg', t.msg_timer);
            safeUpdate('t-timer-chime', t.chime_info);
            loadChimeSettings(); // ì°¨ì„ë²¨ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            safeUpdate('t-card3', t.card3);
            safeUpdate('t-lbl1', t.l1);
            safeUpdate('inRhema', t.ph_rhema, true);
            safeUpdate('t-lbl2', t.l2);
            safeUpdate('inAction', t.ph_action, true);
            safeUpdate('t-lbl3', t.l3);
            safeUpdate('inThanks', t.ph_thanks, true);
            
            const saveBtn = document.getElementById('t-btn-save');
            if(saveBtn) saveBtn.innerText = editId ? t.btn_update : t.btn_save;
            
            const histBtn = document.getElementById('t-btn-hist');
            if(histBtn) histBtn.innerText = t.btn_hist;
            
            // 21ì¼ ì±Œë¦°ì§€
            updateChallengeText();
            
            // ëª©ì¥
            updateMokjangText();
            
            // ê°€ì´ë“œ
            updateGuideText();
            
            // ì„¤ì • ëª¨ë‹¬
            updateSettingsText();
            
            // View ëª¨ë‹¬ ë¼ë²¨
            safeUpdate('v-lbl1', t.v_lbl1);
            safeUpdate('v-lbl2', t.v_lbl2);
            safeUpdate('v-lbl3', t.v_lbl3);
            safeUpdate('v-lbl4', t.v_lbl4);
            safeUpdate('v-btn-del', t.btn_del);
            safeUpdate('v-btn-edit', t.btn_edit);
            
            // ì‚¬ìš©ì ì •ë³´ ë‹¤ì‹œ ë¡œë“œ
            loadSettings();
            
            console.log('updateText completed');
        }


        function updateMokjangText() {
            const t = lang[curLang];
            
            // ë¯¸ì„¤ì • í™”ë©´
            const setupTitle = document.querySelector('#mokjang-not-setup h3');
            if(setupTitle) setupTitle.innerHTML = t.mokjang_setup_title;
            
            const setupDesc = document.querySelector('#mokjang-not-setup .mokjang-setup p');
            if(setupDesc) setupDesc.innerText = t.mokjang_setup_desc;
            
            const setupBtn = document.querySelector('#mokjang-not-setup .btn');
            if(setupBtn) setupBtn.innerText = t.mokjang_setup_btn;
            
            const whatTitle = document.querySelector('#mokjang-not-setup .card h3');
            if(whatTitle) whatTitle.innerHTML = t.mokjang_what_title;
            
            const whatDesc = document.querySelector('#mokjang-not-setup .card p');
            if(whatDesc) whatDesc.innerText = t.mokjang_what_desc;
            
            // ì„¤ì • ì™„ë£Œ í™”ë©´
            const encourageTitle = document.querySelector('#mokjang-content .card:last-of-type h3');
            if(encourageTitle) encourageTitle.innerHTML = t.mokjang_encourage_title;
            
            const encourageMsg = document.querySelector('#mokjang-content .card:last-of-type p');
            if(encourageMsg) encourageMsg.innerText = t.mokjang_encourage_msg;
            
            const leaveBtn = document.querySelector('[onclick="leaveMokjang()"]');
            if(leaveBtn) leaveBtn.innerText = t.mokjang_leave;
        }

        function updateGuideText() {
            const t = lang[curLang];
            
            const guideTitle = document.querySelector('#tab-guide h2');
            if(guideTitle) guideTitle.innerHTML = t.guide_title;
            
            const whyTitle = document.querySelector('.guide-box .guide-title');
            if(whyTitle) whyTitle.innerHTML = t.guide_why_title;
            
            const whyDesc = document.querySelector('.guide-box .guide-text');
            if(whyDesc) whyDesc.innerHTML = t.guide_why_desc;
            
            const lordsPrayerTitle = document.querySelector('#tab-guide h3');
            if(lordsPrayerTitle) lordsPrayerTitle.innerText = t.guide_lordsprayer;
            
            // 5ë‹¨ê³„
            const steps = document.querySelectorAll('.step-content');
            if(steps[0]) {
                steps[0].querySelector('h4').innerText = t.guide_step1_title;
                steps[0].querySelector('p').innerText = t.guide_step1_desc;
            }
            if(steps[1]) {
                steps[1].querySelector('h4').innerText = t.guide_step2_title;
                steps[1].querySelector('p').innerText = t.guide_step2_desc;
            }
            if(steps[2]) {
                steps[2].querySelector('h4').innerText = t.guide_step3_title;
                steps[2].querySelector('p').innerText = t.guide_step3_desc;
            }
            if(steps[3]) {
                steps[3].querySelector('h4').innerText = t.guide_step4_title;
                steps[3].querySelector('p').innerText = t.guide_step4_desc;
            }
            if(steps[4]) {
                steps[4].querySelector('h4').innerText = t.guide_step5_title;
                steps[4].querySelector('p').innerText = t.guide_step5_desc;
            }
            
            const principle = document.querySelector('#tab-guide .card:first-of-type > div[style*="background: #f0f0f0"] p');
            if(principle) principle.innerHTML = t.guide_principle;
            
            // ìê°€ ì§„ë‹¨
            const selfcheckTitle = document.getElementById('guide-selfcheck-title');
            if(selfcheckTitle) selfcheckTitle.innerHTML = t.guide_selfcheck_title;
            
            const selfcheckDesc = document.getElementById('guide-selfcheck-desc');
            if(selfcheckDesc) selfcheckDesc.innerText = t.guide_selfcheck_desc;
            
            // ìê°€ì§„ë‹¨ 8ë¬¸í•­ - data ì†ì„±ì—ì„œ ì½ê¸°
            for(let i = 1; i <= 8; i++) {
                const el = document.getElementById('guide-q' + i);
                if(el) {
                    const text = curLang === 'ko' ? el.getAttribute('data-ko') : el.getAttribute('data-en');
                    if(text) el.innerHTML = text;
                }
            }
            
            const scoring = document.getElementById('guide-selfcheck-scoring');
            if(scoring) scoring.innerHTML = t.guide_scoring;
            
            // ìê°€ì§„ë‹¨ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            const resetBtn = document.getElementById('guide-reset-btn');
            if(resetBtn) resetBtn.innerText = curLang === 'ko' ? 'ë‹¤ì‹œ ì²´í¬' : 'Reset';
            
            // ì ìˆ˜ ì¬ê³„ì‚° (ì–¸ì–´ ë³€ê²½ ì‹œ)
            calculateSelfCheckScore();
            
            // 21ì¼ ì±Œë¦°ì§€ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ (data ì†ì„± ì‚¬ìš©)
            updateChallengeText();
            
            // í†µì—­ íƒ­ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            updateInterpreterText();
        }

        function updateChallengeText() {
            // ì±Œë¦°ì§€ ì‹œì‘ í™”ë©´ - data ì†ì„±ì—ì„œ ì½ê¸°
            const challengeElements = [
                'challenge-start-title',
                'challenge-start-desc', 
                'challenge-start-btn',
                'challenge-structure-title',
                'challenge-week1-desc',
                'challenge-week2-desc',
                'challenge-week3-desc'
            ];
            
            challengeElements.forEach(id => {
                const el = document.getElementById(id);
                if(el) {
                    const text = curLang === 'ko' ? el.getAttribute('data-ko') : el.getAttribute('data-en');
                    if(text) {
                        if(el.tagName === 'BUTTON') {
                            el.innerHTML = text;
                        } else {
                            el.innerHTML = text;
                        }
                    }
                }
            });
            
            // Day 1~21 ì œëª© ì—…ë°ì´íŠ¸
            const dayTitles = document.querySelectorAll('.day-title[data-ko][data-en]');
            dayTitles.forEach(el => {
                const text = curLang === 'ko' ? el.getAttribute('data-ko') : el.getAttribute('data-en');
                if(text) el.innerHTML = text;
            });
            
            // ì£¼ì°¨ í—¤ë” ì—…ë°ì´íŠ¸
            const weekHeaders = document.querySelectorAll('.week-header[data-ko][data-en]');
            weekHeaders.forEach(el => {
                const text = curLang === 'ko' ? el.getAttribute('data-ko') : el.getAttribute('data-en');
                if(text) el.innerHTML = text;
            });
            
            // ì±Œë¦°ì§€ ë²„íŠ¼ ì—…ë°ì´íŠ¸
            const shareBtn = document.getElementById('challenge-share-btn');
            if(shareBtn) {
                const shareText = curLang === 'ko' ? shareBtn.getAttribute('data-ko') : shareBtn.getAttribute('data-en');
                if(shareText) shareBtn.innerHTML = shareText;
            }
            
            const resetBtn = document.getElementById('challenge-reset-btn');
            if(resetBtn) {
                const resetText = curLang === 'ko' ? resetBtn.getAttribute('data-ko') : resetBtn.getAttribute('data-en');
                if(resetText) resetBtn.innerHTML = resetText;
            }
            
            // ì§„í–‰ ìƒí™© ë¼ë²¨ ì—…ë°ì´íŠ¸
            const progressLabel = document.getElementById('challenge-progress-label');
            if(progressLabel) {
                const progressText = curLang === 'ko' ? progressLabel.getAttribute('data-ko') : progressLabel.getAttribute('data-en');
                if(progressText) progressLabel.innerHTML = progressText;
            }
            
            // ëª¨ë“  data-ko, data-en ì†ì„±ì„ ê°€ì§„ ìš”ì†Œë“¤ ì—…ë°ì´íŠ¸ (challenge ì„¹ì…˜ ì „ì²´)
            document.querySelectorAll('#tab-challenge [data-ko][data-en]').forEach(el => {
                const text = curLang === 'ko' ? el.getAttribute('data-ko') : el.getAttribute('data-en');
                if(text) el.innerHTML = text;
            });
            
            // 21ì¼ í›ˆë ¨ ë‹¤ì‹œ ë Œë”ë§ (ì–¸ì–´ ì „í™˜ ì‹œ)
            if(typeof renderTrainingDays === 'function') renderTrainingDays();
        }

        function updateInterpreterText() {
            // í†µì—­ íƒ­ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ (data ì†ì„± ì‚¬ìš©)
            const interpreterElements = [
                'interpreter-title',
                'interpreter-desc',
                'interpreter-tip-title',
                'interpreter-tip1',
                'interpreter-tip2',
                'interpreter-tip3'
            ];
            
            interpreterElements.forEach(id => {
                const el = document.getElementById(id);
                if(el) {
                    const text = curLang === 'ko' ? el.getAttribute('data-ko') : el.getAttribute('data-en');
                    if(text) el.innerHTML = text;
                }
            });
        }

        function updateSettingsText() {
            const t = lang[curLang];
            
            const modalTitle = document.getElementById('setting-modal-title');
            if(modalTitle) modalTitle.innerText = t.modal_title;
            
            const modalMsg = document.getElementById('setting-modal-msg');
            if(modalMsg) modalMsg.innerText = t.modal_msg;
            
            document.getElementById('setName').placeholder = t.ph_name;
            document.getElementById('setMokjang').placeholder = t.ph_mokjang;
            
            const journeyTitle = document.querySelector('.journey-title');
            if(journeyTitle) journeyTitle.innerText = t.journey_title;
            
            // ì‹œê°ì  stage labels ì—…ë°ì´íŠ¸
            const stageItems = document.querySelectorAll('.stage-item');
            if(stageItems[0]) stageItems[0].querySelector('.stage-label').innerHTML = t.stage1;
            if(stageItems[1]) stageItems[1].querySelector('.stage-label').innerHTML = t.stage2;
            if(stageItems[2]) stageItems[2].querySelector('.stage-label').innerHTML = t.stage3;
            if(stageItems[3]) stageItems[3].querySelector('.stage-label').innerHTML = t.stage4;
            
            // ë“œë¡­ë‹¤ìš´ ì˜µì…˜
            const journeySelect = document.getElementById('setJourney');
            journeySelect.options[0].text = `â‘  ${t.journey_seeker} - ${t.desc_seeker}`;
            journeySelect.options[1].text = `â‘¡ ${t.journey_believer} - ${t.desc_believer}`;
            journeySelect.options[2].text = `â‘¢ ${t.journey_disciple} - ${t.desc_disciple}`;
            journeySelect.options[3].text = `â‘£ ${t.journey_shepherd} - ${t.desc_shepherd}`;
            
            const shepherdSelect = document.getElementById('setShepherdType');
            shepherdSelect.options[0].text = t.opt_shepherd;
            shepherdSelect.options[1].text = t.opt_moknye;
            shepherdSelect.options[2].text = t.opt_mokbu;
            
            const saveBtn = document.querySelector('#settingModal .btn');
            if(saveBtn) saveBtn.innerText = t.modal_btn;
        }

        // íƒ­ ì „í™˜
        function switchTab(tabName, element) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById('tab-' + tabName).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            element.classList.add('active');

            if(tabName === 'challenge') {
                checkChallengeStatus();
            }
            if(tabName === 'mokjang') {
                checkMokjangStatus();
            }
        }

        // ========== ì¼ì§€ ê¸°ëŠ¥ (ê¸°ì¡´ ìœ ì§€) ==========
        function toggleTimer() {
            const t = lang[curLang];
            const btn = document.getElementById('t-timer-btn');
            
            // ëª¨ë°”ì¼ ì˜¤ë””ì˜¤ í™œì„±í™”: ì‚¬ìš©ì í´ë¦­ ì‹œ AudioContext ì´ˆê¸°í™”
            if(!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
            if(audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
            
            if(!isTimerRunning) {
                isTimerRunning = true; 
                btn.innerText = t.btn_pause; 
                btn.classList.add('running');
                timerInterval = setInterval(() => {
                    if(timeLeft > 0) {
                        timeLeft--;
                        const elapsed = 900 - timeLeft; // ê²½ê³¼ ì‹œê°„
                        
                        // 5ë¶„(300ì´ˆ)ë§ˆë‹¤ ì°¨ì„ë²¨
                        if(elapsed === 300) playChime(1); // 5ë¶„: ì§§ì€ ë²¨ 1ë²ˆ
                        else if(elapsed === 600) playChime(2); // 10ë¶„: ì§§ì€ ë²¨ 2ë²ˆ
                        
                        const m = Math.floor(timeLeft/60).toString().padStart(2,'0');
                        const s = (timeLeft%60).toString().padStart(2,'0');
                        document.getElementById('timer').innerText = `${m}:${s}`;
                    } else endTimer();
                }, 1000);
            } else {
                clearInterval(timerInterval); 
                isTimerRunning = false; 
                btn.innerText = t.btn_resume; 
                btn.classList.remove('running');
                btn.classList.add('paused');
            }
        }
        
        function endTimer() {
            const t = lang[curLang];
            clearInterval(timerInterval); 
            isTimerRunning = false;
            document.getElementById('timer').innerText = "00:00";
            document.getElementById('t-timer-btn').innerText = t.btn_start_timer;
            document.getElementById('t-timer-btn').classList.remove('running', 'paused');
            playChime(3); // 15ë¶„ ì¢…ë£Œ ì†Œë¦¬
            const message = curLang === 'ko' ? 'ì¹¨ë¬µ ê¸°ë„ ì‹œê°„ì´ ëë‚¬ìŠµë‹ˆë‹¤. ğŸ™' : 'Prayer time is complete. ğŸ™';
            setTimeout(() => { 
                alert(message); 
                resetTimer(); 
            }, 500);
        }
        
        function resetTimer() { 
            timeLeft = 15 * 60; 
            document.getElementById('timer').innerText = "15:00"; 
        }
        
        // ì°¨ì„ë²¨ on/off í† ê¸€
        function toggleChime() {
            chimeEnabled = !chimeEnabled;
            localStorage.setItem(CHIME_ENABLED_KEY, chimeEnabled ? 'true' : 'false');
            
            const btn = document.getElementById('chimeBtn');
            const status = document.getElementById('t-chime-status');
            const t = lang[curLang];
            
            if(chimeEnabled) {
                // ì¼œì§ ìƒíƒœ
                btn.style.background = 'var(--gold)';
                btn.style.boxShadow = '0 2px 8px rgba(243,156,18,0.3)';
                btn.innerText = 'ğŸ””';
                status.style.color = 'var(--gold)';
                status.innerText = t.chime_on;
            } else {
                // êº¼ì§ ìƒíƒœ
                btn.style.background = '#ccc';
                btn.style.boxShadow = '0 2px 8px rgba(0,0,0,0.1)';
                btn.innerText = 'ğŸ”•';
                status.style.color = '#999';
                status.innerText = t.chime_off;
            }
            
            const message = curLang === 'ko' 
                ? (chimeEnabled ? 'ì°¨ì„ë²¨ì´ ì¼œì¡ŒìŠµë‹ˆë‹¤ ğŸ””' : 'ì°¨ì„ë²¨ì´ êº¼ì¡ŒìŠµë‹ˆë‹¤ ğŸ”•')
                : (chimeEnabled ? 'Chime enabled ğŸ””' : 'Chime disabled ğŸ”•');
            showToast(message);
        }
        
        // ì°¨ì„ë²¨ ì„¤ì • ë¡œë“œ
        function loadChimeSettings() {
            const saved = localStorage.getItem(CHIME_ENABLED_KEY);
            chimeEnabled = saved === null ? true : saved === 'true';
            
            const btn = document.getElementById('chimeBtn');
            const status = document.getElementById('t-chime-status');
            const t = lang[curLang];
            
            if(btn && status) {
                if(chimeEnabled) {
                    btn.style.background = 'var(--gold)';
                    btn.style.boxShadow = '0 2px 8px rgba(243,156,18,0.3)';
                    btn.innerText = 'ğŸ””';
                    status.style.color = 'var(--gold)';
                    status.innerText = t.chime_on;
                } else {
                    btn.style.background = '#ccc';
                    btn.style.boxShadow = '0 2px 8px rgba(0,0,0,0.1)';
                    btn.innerText = 'ğŸ”•';
                    status.style.color = '#999';
                    status.innerText = t.chime_off;
                }
            }
        }
        
        function playChime(times = 3) {
            // ì°¨ì„ë²¨ì´ êº¼ì ¸ìˆìœ¼ë©´ ì†Œë¦¬ ì•ˆ ëƒ„
            if(!chimeEnabled) return;
            
            // ì „ì—­ AudioContext ì‚¬ìš© (ì—†ìœ¼ë©´ ìƒì„±)
            if(!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
            // suspended ìƒíƒœë©´ resume (ëª¨ë°”ì¼ ëŒ€ì‘)
            if(audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
            
            const ctx = audioCtx;
            
            if(times === 1) {
                // 5ë¶„ ê²½ê³¼: ë‚®ì€ ìŒ ì§§ê²Œ 1ë²ˆ
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.type = 'sine';
                osc.frequency.setValueAtTime(500, ctx.currentTime);
                gain.gain.setValueAtTime(0.3, ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.3);
                osc.connect(gain);
                gain.connect(ctx.destination);
                osc.start();
                osc.stop(ctx.currentTime + 0.3);
            } else if(times === 2) {
                // 10ë¶„ ê²½ê³¼: ì¤‘ê°„ ìŒ ì§§ê²Œ 2ë²ˆ
                for(let i = 0; i < 2; i++) {
                    const osc = ctx.createOscillator();
                    const gain = ctx.createGain();
                    osc.type = 'sine';
                    const startTime = ctx.currentTime + (i * 0.4);
                    osc.frequency.setValueAtTime(700, startTime);
                    gain.gain.setValueAtTime(0.3, startTime);
                    gain.gain.exponentialRampToValueAtTime(0.001, startTime + 0.3);
                    osc.connect(gain);
                    gain.connect(ctx.destination);
                    osc.start(startTime);
                    osc.stop(startTime + 0.3);
                }
            } else {
                // 15ë¶„ ì¢…ë£Œ: ë†’ì€ ìŒ ê¸¸ê²Œ
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.type = 'sine';
                osc.frequency.setValueAtTime(880, ctx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(440, ctx.currentTime + 1.5);
                gain.gain.setValueAtTime(0.5, ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 1.5);
                osc.connect(gain);
                gain.connect(ctx.destination);
                osc.start();
                osc.stop(ctx.currentTime + 1.5);
            }
        }

        // ========== ìê°€ ì§„ë‹¨ ê¸°ëŠ¥ ==========
        let selfCheckScores = [0, 0, 0, 0, 0, 0, 0, 0]; // 8ë¬¸í•­ ì ìˆ˜


        function selectScore(questionIdx, score) {
            selfCheckScores[questionIdx] = score;
            
            // ëª¨ë“  ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
            for(let s = 1; s <= 5; s++) {
                const btn = document.getElementById(`q${questionIdx}-s${s}`);
                if(btn) {
                    btn.style.background = 'white';
                    btn.style.borderColor = '#ddd';
                    btn.style.color = '#666';
                }
            }
            
            // ì„ íƒëœ ë²„íŠ¼ ê°•ì¡°
            const selectedBtn = document.getElementById(`q${questionIdx}-s${score}`);
            if(selectedBtn) {
                selectedBtn.style.background = 'var(--navy)';
                selectedBtn.style.borderColor = 'var(--navy)';
                selectedBtn.style.color = 'white';
            }
            
            calculateSelfCheckScore();
        }

        function calculateSelfCheckScore() {
            const total = selfCheckScores.reduce((sum, score) => sum + score, 0);
            const t = lang[curLang];
            
            const scoreEl = document.getElementById('guide-total-score');
            const resultEl = document.getElementById('guide-score-result');
            
            if(scoreEl) {
                scoreEl.innerText = curLang === 'ko' ? `ì´ì : ${total}ì ` : `Total: ${total} points`;
            }
            
            if(resultEl) {
                let result = '';
                if(total === 0) {
                    result = curLang === 'ko' ? 'ë¬¸í•­ì„ ì²´í¬í•´ë³´ì„¸ìš”' : 'Please check the items';
                } else if(total >= 35) {
                    result = curLang === 'ko' ? 'ğŸŒ¾ ì˜¥í† ! ë§ì”€ì´ ì—´ë§¤ ë§ºê³  ìˆìŠµë‹ˆë‹¤!' : 'ğŸŒ¾ Good Soil! The Word is bearing fruit!';
                } else if(total >= 25) {
                    result = curLang === 'ko' ? 'ğŸŒ± ì„±ì¥ ì¤‘! ê³„ì† í›ˆë ¨í•˜ì„¸ìš”!' : 'ğŸŒ± Growing! Keep training!';
                } else {
                    result = curLang === 'ko' ? 'ğŸŒ¿ í›ˆë ¨ í•„ìš”! ê²½ì²­ì˜ ì€í˜œë¥¼ ì‚¬ëª¨í•˜ì„¸ìš”!' : 'ğŸŒ¿ Training Needed! Seek the grace of listening!';
                }
                resultEl.innerText = result;
                resultEl.style.color = total >= 35 ? '#27ae60' : (total >= 25 ? '#f39c12' : '#e74c3c');
                resultEl.style.fontWeight = '700';
            }
        }

        function resetSelfCheck() {
            selfCheckScores = [0, 0, 0, 0, 0, 0, 0, 0];
            
            // ëª¨ë“  ë²„íŠ¼ ì´ˆê¸°í™”
            for(let q = 0; q < 8; q++) {
                for(let s = 1; s <= 5; s++) {
                    const btn = document.getElementById(`q${q}-s${s}`);
                    if(btn) {
                        btn.style.background = 'white';
                        btn.style.borderColor = '#ddd';
                        btn.style.color = '#666';
                    }
                }
            }
            
            calculateSelfCheckScore();
        }

        function saveData() {
            const data = {
                id: editId ? editId : Date.now(),
                date: new Date().toLocaleDateString(),
                ref: document.getElementById('inRef').value,
                text: document.getElementById('inText').value,
                rhema: document.getElementById('inRhema').value,
                action: document.getElementById('inAction').value,
                thanks: document.getElementById('inThanks').value
            };
            
            if(!data.text && !data.rhema) {
                showToast('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }
            
            let logs = JSON.parse(localStorage.getItem(DB_KEY) || '[]');
            if(editId) {
                const index = logs.findIndex(l => l.id === editId);
                if(index !== -1) logs[index] = data;
                showToast('ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤');
                exitEditMode();
            } else {
                logs.unshift(data);
                showToast('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤');
            }
            
            localStorage.setItem(DB_KEY, JSON.stringify(logs));
            clearInputs();
            renderHistory();
        }

        function resetInput(...ids) { 
            ids.forEach(id => document.getElementById(id).value = ''); 
        }
        
        function clearInputs() { 
            resetInput('inRef','inText','inRhema','inAction','inThanks'); 
        }
        
        function viewHistory() {
            const t = lang[curLang];
            renderHistory();
            document.getElementById('historyModal').classList.add('active');
            // ëª¨ë‹¬ ì œëª© ì—…ë°ì´íŠ¸
            const modalTitle = document.getElementById('modal-history-title');
            if(modalTitle) modalTitle.innerText = t.list_title;
        }

        function closeHistory() {
            document.getElementById('historyModal').classList.remove('active');
        }

        function renderHistory() {
            const t = lang[curLang];
            const list = document.getElementById('historyList'); 
            const logs = JSON.parse(localStorage.getItem(DB_KEY) || '[]'); 
            list.innerHTML = '';
            if(logs.length === 0) { 
                list.innerHTML = `<div style="padding:30px; text-align:center; color:#999;">${t.empty_list}</div>`; 
                return; 
            }
            logs.forEach(log => {
                const el = document.createElement('div'); 
                el.className = 'log-item';
                el.innerHTML = `
                    <div>
                        <div class="log-date">${log.date}</div>
                        <div class="log-ref">${log.ref||'-'}</div>
                    </div>
                    <div style="font-size:1.2rem; color:#ccc;">â€º</div>
                `;
                el.onclick = () => openViewModal(log.id); 
                list.appendChild(el);
            });
        }
        
        function openViewModal(id) {
            viewId = id; 
            const logs = JSON.parse(localStorage.getItem(DB_KEY) || '[]'); 
            const log = logs.find(l => l.id === id); 
            if(!log) return;
            
            document.getElementById('v-date').innerText = log.date; 
            document.getElementById('v-ref').innerText = log.ref || '-';
            document.getElementById('v-text').innerText = log.text; 
            document.getElementById('v-rhema').innerText = log.rhema;
            document.getElementById('v-action').innerText = log.action; 
            document.getElementById('v-thanks').innerText = log.thanks;
            document.getElementById('viewModal').classList.add('active');
        }
        
        function closeViewModal() { 
            document.getElementById('viewModal').classList.remove('active'); 
            viewId = null; 
        }
        
        function editCurrentLog() {
            if(!viewId) return; 
            const logs = JSON.parse(localStorage.getItem(DB_KEY) || '[]'); 
            const log = logs.find(l => l.id === viewId);
            closeViewModal(); 
            
            // ì¼ì§€ íƒ­ìœ¼ë¡œ ì „í™˜
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById('tab-journal').classList.add('active');
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.querySelectorAll('.nav-item')[0].classList.add('active');
            
            document.getElementById('inRef').value = log.ref; 
            document.getElementById('inText').value = log.text;
            document.getElementById('inRhema').value = log.rhema; 
            document.getElementById('inAction').value = log.action; 
            document.getElementById('inThanks').value = log.thanks;
            editId = log.id;
            document.getElementById('t-btn-save').innerText = 'ìˆ˜ì • ì™„ë£Œ';
        }

        function deleteCurrentLog() {
            if(!viewId) return; 
            if(confirm('ì´ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                let logs = JSON.parse(localStorage.getItem(DB_KEY) || '[]'); 
                logs = logs.filter(l => l.id !== viewId);
                localStorage.setItem(DB_KEY, JSON.stringify(logs)); 
                showToast('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤'); 
                closeViewModal(); 
                renderHistory();
            }
        }
        
        function exitEditMode() { 
            editId = null; 
            clearInputs(); 
            document.getElementById('t-btn-save').innerText = 'ì™„ë£Œ';
        }

        // ========== 21ì¼ ì±Œë¦°ì§€ ê¸°ëŠ¥ ==========
        function checkChallengeStatus() {
            console.log('checkChallengeStatus called');
            const started = localStorage.getItem(CHALLENGE_STARTED_KEY);
            console.log('Challenge started:', started);
            
            if(started === 'true') {
                console.log('Showing challenge-in-progress');
                document.getElementById('challenge-not-started').style.display = 'none';
                document.getElementById('challenge-in-progress').style.display = 'block';
                loadChallengeProgress();
                updateChallengeProgress();
            } else {
                console.log('Showing challenge-not-started');
                document.getElementById('challenge-not-started').style.display = 'block';
                document.getElementById('challenge-in-progress').style.display = 'none';
            }
        }

        function startChallenge() {
            const t = lang[curLang];
            if(confirm(curLang === 'ko' ? '21ì¼ ê²½ì²­ ì±Œë¦°ì§€ë¥¼ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?' : 'Start 21-day listening challenge?')) {
                localStorage.setItem(CHALLENGE_STARTED_KEY, 'true');
                localStorage.setItem(CHALLENGE_KEY, JSON.stringify([]));
                checkChallengeStatus();
                showToast(t.msg_challenge_start);
            }
        }

        function toggleDay(day) {
            const t = lang[curLang];
            const dayItem = document.querySelector(`[data-day="${day}"]`);
            const isCompleted = dayItem.classList.contains('completed');

            if(!isCompleted) {
                if(confirm(`Day ${day} ${t.msg_challenge_complete}?`)) {
                    dayItem.classList.add('completed');
                    dayItem.querySelector('.day-check').innerHTML = 'âœ“';
                    saveChallengeProgress();
                    updateChallengeProgress();
                    showToast(`Day ${day} ${t.msg_challenge_complete}! ğŸ‰`);
                }
            } else {
                if(confirm(`Day ${day} ${curLang === 'ko' ? 'ì™„ë£Œë¥¼ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?' : 'Cancel completion?'}`)) {
                    dayItem.classList.remove('completed');
                    dayItem.querySelector('.day-check').innerHTML = 'â—‹';
                    saveChallengeProgress();
                    updateChallengeProgress();
                    showToast(t.msg_challenge_cancel);
                }
            }
        }

        function saveChallengeProgress() {
            const completed = [];
            for(let i = 1; i <= 21; i++) {
                const item = document.querySelector(`[data-day="${i}"]`);
                if(item && item.classList.contains('completed')) {
                    completed.push(i);
                }
            }
            localStorage.setItem(CHALLENGE_KEY, JSON.stringify(completed));
        }

        function loadChallengeProgress() {
            const completed = JSON.parse(localStorage.getItem(CHALLENGE_KEY) || '[]');
            completed.forEach(day => {
                const item = document.querySelector(`[data-day="${day}"]`);
                if(item) {
                    item.classList.add('completed');
                    item.querySelector('.day-check').innerHTML = 'âœ“';
                }
            });
        }

        function updateChallengeProgress() {
            const completed = JSON.parse(localStorage.getItem(CHALLENGE_KEY) || '[]');
            const count = completed.length;
            const percent = Math.round((count / 21) * 100);
            
            document.getElementById('progressDays').innerText = count;
            document.getElementById('progressBar').style.width = percent + '%';

            const statusDiv = document.getElementById('challengeStatus');
            if(count === 21) {
                statusDiv.classList.add('completed');
                showConfetti();
            } else {
                statusDiv.classList.remove('completed');
            }
        }

        function resetChallenge() {
            const t = lang[curLang];
            const confirmMsg = curLang === 'ko' ? 
                'ì±Œë¦°ì§€ë¥¼ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\ní˜„ì¬ ì§„í–‰ ìƒí™©ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.' :
                'Restart challenge from the beginning?\n\nCurrent progress will be reset.';
            
            if(confirm(confirmMsg)) {
                localStorage.setItem(CHALLENGE_KEY, JSON.stringify([]));
                
                // ëª¨ë“  day ì´ˆê¸°í™”
                for(let i = 1; i <= 21; i++) {
                    const item = document.querySelector(`[data-day="${i}"]`);
                    if(item) {
                        item.classList.remove('completed');
                        item.querySelector('.day-check').innerHTML = 'â—‹';
                    }
                }
                
                updateChallengeProgress();
                showToast(t.msg_challenge_reset);
            }
        }

        function shareProgress() {
            const completed = JSON.parse(localStorage.getItem(CHALLENGE_KEY) || '[]');
            const count = completed.length;
            const name = localStorage.getItem('galtar_name') || 'ì €';
            
            const message = `ğŸ¯ 21ì¼ ê²½ì²­ í”„ë¡œì íŠ¸

${name}ë‹˜ì´ ${count}/21ì¼ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! ğŸ‰

í•¨ê»˜ í•˜ë‚˜ë‹˜ì˜ ìŒì„±ì„ ë“£ëŠ” ê·€ë¥¼ íšŒë³µí•´ìš”!

#ì‹œì• í‹€ì§€êµ¬ì´ŒêµíšŒ #ê²½ì²­í›ˆë ¨ #Genesis1314`;

            if (navigator.share) {
                navigator.share({
                    title: 'G-ALTAR 1314 ê²½ì²­',
                    text: message
                });
            } else {
                navigator.clipboard.writeText(message);
                showToast('ë©”ì‹œì§€ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤');
            }
        }

        function showConfetti() {
            // ê°„ë‹¨í•œ ì™„ì£¼ ì¶•í•˜ íš¨ê³¼ (ì˜µì…˜)
            console.log('ğŸ‰ 21ì¼ ì™„ì£¼ë¥¼ ì¶•í•˜í•©ë‹ˆë‹¤!');
        }

        // ========== ëª©ì¥ ê¸°ëŠ¥ ==========
        function checkMokjangStatus() {
            const code = localStorage.getItem('galtar_mokjang_code');
            
            if(code) {
                document.getElementById('mokjang-not-setup').style.display = 'none';
                document.getElementById('mokjang-content').style.display = 'block';
                loadMokjangData(code);
                loadMokjangLeaderboard();
            } else {
                document.getElementById('mokjang-not-setup').style.display = 'block';
                document.getElementById('mokjang-content').style.display = 'none';
            }
        }

        function openMokjangSetup() {
            const t = lang[curLang];
            document.getElementById('mokjangSetupModal').classList.add('active');
            
            // ëª¨ë‹¬ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            const modalTitle = document.getElementById('mokjang-setup-title');
            if(modalTitle) modalTitle.innerText = t.mokjang_modal_title;
            
            const modalDesc = document.getElementById('mokjang-setup-desc');
            if(modalDesc) modalDesc.innerText = t.mokjang_modal_desc;
            
            const codeInput = document.getElementById('inputMokjangCode');
            if(codeInput) codeInput.placeholder = t.mokjang_code_ph;
            
            const helpText = document.getElementById('mokjang-setup-help');
            if(helpText) helpText.innerText = t.mokjang_code_help;
            
            const joinBtn = document.getElementById('mokjang-join-btn');
            if(joinBtn) joinBtn.innerText = t.mokjang_join;
        }

        function closeMokjangSetup() {
            document.getElementById('mokjangSetupModal').classList.remove('active');
        }

        function joinMokjang() {
            const code = document.getElementById('inputMokjangCode').value.trim().toUpperCase();
            
            if(!code) {
                showToast('ëª©ì¥ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }
            
            localStorage.setItem('galtar_mokjang_code', code);
            closeMokjangSetup();
            checkMokjangStatus();
            showToast('ëª©ì¥ì— ì°¸ì—¬í–ˆìŠµë‹ˆë‹¤!');
        }

        function leaveMokjang() {
            if(confirm('ëª©ì¥ì—ì„œ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.removeItem('galtar_mokjang_code');
                checkMokjangStatus();
                showToast('ëª©ì¥ì—ì„œ ë‚˜ì™”ìŠµë‹ˆë‹¤');
            }
        }

        // Google Sheets API URL
        const SHEETS_API_URL = 'https://script.google.com/macros/s/AKfycbzuXErOWs9c8pj9AJcmsi1WAXVLx8UrFS6vsHd0KDl50pVo0Hzm1Bg4O-hDFIQLaBHAqQ/exec';
        
        // ì „ì²´ ë©¤ë²„ ë°ì´í„° ìºì‹œ
        let allMembersData = [];

        async function loadMokjangData(code) {
            const mokjangNameEl = document.getElementById('mokjangName');
            const grid = document.getElementById('memberGrid');
            const completedEl = document.getElementById('mokjangCompleted');
            const totalEl = document.getElementById('mokjangTotal');
            
            mokjangNameEl.innerText = 'ë¡œë”© ì¤‘...';
            grid.innerHTML = '<p style="text-align:center; color:#666;">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>';
            
            try {
                const response = await fetch(SHEETS_API_URL);
                const data = await response.json();
                allMembersData = data;
                
                // í•´ë‹¹ ëª©ì¥ ë©¤ë²„ í•„í„°ë§
                const members = data.filter(m => m['ëª©ì¥ì½”ë“œ'] === code);
                
                if (members.length === 0) {
                    mokjangNameEl.innerText = code;
                    grid.innerHTML = '<p style="text-align:center; color:#999;">ë“±ë¡ëœ ëª©ì¥ì‹êµ¬ê°€ ì—†ìŠµë‹ˆë‹¤.<br>ì‹œíŠ¸ì— ë©¤ë²„ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>';
                    completedEl.innerText = '0';
                    totalEl.innerText = '0';
                    return;
                }
                
                // ëª©ì¥ ì´ë¦„ í‘œì‹œ
                mokjangNameEl.innerText = members[0]['ëª©ì¥'] || code;
                
                // ì˜¤ëŠ˜ ë‚ ì§œ ê¸°ì¤€ ì™„ë£Œ ì²´í¬
                const today = new Date();
                const dayNum = Math.min(21, Math.max(1, parseInt(localStorage.getItem('galtar_challenge_day') || '1')));
                const dayKey = 'Day' + dayNum;
                
                grid.innerHTML = '';
                let completedCount = 0;
                
                members.forEach(member => {
                    const isCompleted = member[dayKey] === 'âœ“';
                    if (isCompleted) completedCount++;
                    
                    const role = member['ì—­í• '] || 'ëª©ì¥ì‹êµ¬';
                    const roleIcon = role === 'ëª©ì' ? 'ğŸ‘¨â€ğŸŒ¾' : role === 'ëª©ë…€' ? 'ğŸ‘©â€ğŸŒ¾' : '';
                    
                    const div = document.createElement('div');
                    div.className = 'member-item' + (isCompleted ? ' completed' : '');
                    div.innerHTML = `
                        <div class="member-name">${roleIcon} ${member['ì´ë¦„']}</div>
                        <div class="member-status">${isCompleted ? 'âœ“' : 'â—‹'}</div>
                    `;
                    grid.appendChild(div);
                });
                
                completedEl.innerText = completedCount;
                totalEl.innerText = members.length;
                
            } catch (error) {
                console.error('ëª©ì¥ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                mokjangNameEl.innerText = code;
                grid.innerHTML = '<p style="text-align:center; color:#e74c3c;">ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨<br>ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ì„¸ìš”.</p>';
            }
        }
        
        // ëª©ì¥ ë¦¬ë”ë³´ë“œ ë¡œë“œ
        async function loadMokjangLeaderboard() {
            const leaderboardEl = document.getElementById('mokjangLeaderboard');
            if (!leaderboardEl) return;
            
            try {
                if (allMembersData.length === 0) {
                    const response = await fetch(SHEETS_API_URL);
                    allMembersData = await response.json();
                }
                
                // ëª©ì¥ë³„ í†µê³„ ê³„ì‚°
                const mokjangStats = {};
                const dayNum = Math.min(21, Math.max(1, parseInt(localStorage.getItem('galtar_challenge_day') || '1')));
                
                allMembersData.forEach(member => {
                    const code = member['ëª©ì¥ì½”ë“œ'];
                    const name = member['ëª©ì¥'];
                    if (!code || code === 'ADMIN') return;
                    
                    if (!mokjangStats[code]) {
                        mokjangStats[code] = { name: name, total: 0, completed: 0 };
                    }
                    mokjangStats[code].total++;
                    
                    // ì „ì²´ Day ì™„ë£Œìœ¨ ê³„ì‚°
                    let daysCompleted = 0;
                    for (let d = 1; d <= dayNum; d++) {
                        if (member['Day' + d] === 'âœ“') daysCompleted++;
                    }
                    mokjangStats[code].completed += daysCompleted;
                });
                
                // ì™„ë£Œìœ¨ ê¸°ì¤€ ì •ë ¬
                const sorted = Object.entries(mokjangStats)
                    .map(([code, stats]) => ({
                        code,
                        name: stats.name,
                        rate: stats.total > 0 ? Math.round((stats.completed / (stats.total * dayNum)) * 100) : 0
                    }))
                    .sort((a, b) => b.rate - a.rate);
                
                // ë¦¬ë”ë³´ë“œ í‘œì‹œ
                const medals = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'];
                leaderboardEl.innerHTML = sorted.map((m, i) => `
                    <div style="display:flex; justify-content:space-between; align-items:center; padding:8px 0; border-bottom:1px solid #eee;">
                        <span>${i < 3 ? medals[i] : (i+1) + '.'} ${m.name}</span>
                        <span style="font-weight:700; color:${m.rate >= 80 ? '#4CAF50' : m.rate >= 50 ? '#FF9800' : '#999'};">${m.rate}%</span>
                    </div>
                `).join('');
                
            } catch (error) {
                console.error('ë¦¬ë”ë³´ë“œ ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }

        // ========== ì„¤ì • ê¸°ëŠ¥ ==========
        function openSettings() {
            document.getElementById('settingModal').classList.add('active');
            const name = localStorage.getItem('galtar_name');
            const mokjang = localStorage.getItem('galtar_mokjang');
            const journey = localStorage.getItem('galtar_journey') || 'seeker';
            const shepherdType = localStorage.getItem('galtar_shepherd_type') || 'shepherd';
            
            if(name) document.getElementById('setName').value = name;
            if(mokjang) document.getElementById('setMokjang').value = mokjang;
            document.getElementById('setJourney').value = journey;
            document.getElementById('setShepherdType').value = shepherdType;
            onJourneyChange();
        }

        function closeSettings() {
            document.getElementById('settingModal').classList.remove('active');
        }

        function saveSettings() {
            const n = document.getElementById('setName').value;
            const m = document.getElementById('setMokjang').value;
            const j = document.getElementById('setJourney').value;
            const st = document.getElementById('setShepherdType').value;
            
            if(n){ 
                localStorage.setItem('galtar_name', n); 
                localStorage.setItem('galtar_mokjang', m);
                localStorage.setItem('galtar_journey', j); 
                localStorage.setItem('galtar_shepherd_type', st);
                closeSettings();
                loadSettings(); 
                showToast('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤');
            } else {
                showToast('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
            }
        }
        
        function onJourneyChange() {
            const journey = document.getElementById('setJourney').value;
            const shepherdDetail = document.getElementById('shepherdDetail');
            
            if (journey === 'shepherd') {
                shepherdDetail.classList.add('show');
            } else {
                shepherdDetail.classList.remove('show');
            }
            
            updateJourneyVisual(journey);
        }
        
        function updateJourneyVisual(journey) {
            const stages = document.querySelectorAll('.stage-item');
            const stageMap = { seeker: 0, believer: 1, disciple: 2, shepherd: 3 };
            const activeIndex = stageMap[journey];
            
            stages.forEach((stage, index) => {
                if (index <= activeIndex) {
                    stage.classList.add('active');
                } else {
                    stage.classList.remove('active');
                }
            });
        }
        
        function loadSettings() {
            const t = lang[curLang];
            const name = localStorage.getItem('galtar_name');
            const mokjang = localStorage.getItem('galtar_mokjang');
            const journey = localStorage.getItem('galtar_journey') || 'seeker';
            const shepherdType = localStorage.getItem('galtar_shepherd_type') || 'shepherd';
            
            if(name) { 
                let roleText;
                const roleMap = {
                    seeker: t.journey_seeker,
                    believer: t.journey_believer,
                    disciple: t.journey_disciple,
                    shepherd: shepherdType === 'moknye' ? t.journey_moknye : shepherdType === 'mokbu' ? t.journey_mokbu : t.journey_shepherd
                };
                
                roleText = roleMap[journey];
                
                document.getElementById('displayName').innerText = mokjang ? mokjang : name; 
                document.getElementById('displayJourney').innerText = mokjang ? `${name} (${roleText})` : `(${roleText})`; 
                document.getElementById('t-role').innerText = roleText;
            } else {
                // í”„ë¡œí•„ì´ ì—†ì„ ë•Œ ê¸°ë³¸ í…ìŠ¤íŠ¸ (í˜„ì¬ ì–¸ì–´ì— ë§ê²Œ)
                document.getElementById('displayName').innerText = t.default_profile;
                document.getElementById('displayJourney').innerText = '';
                document.getElementById('t-role').innerText = t.default_role;
            }
        }

        // ========== ìœ í‹¸ë¦¬í‹° ==========
        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.innerText = msg;
            toast.className = 'show';
            setTimeout(() => {
                toast.className = '';
            }, 3000);
        }

        // =====================================================
// 21ì¼ ì±Œë¦°ì§€ í™•ì¥ ê¸°ëŠ¥ JavaScript
// ì´ ì½”ë“œë¥¼ index.htmlì˜ </body> íƒœê·¸ ë°”ë¡œ ìœ„, ê¸°ì¡´ <script> ì•ˆì— ì¶”ê°€í•˜ì„¸ìš”
// =====================================================

// 21ì¼ í›ˆë ¨ ë°ì´í„°
const trainingDaysData = {
    ko: [
        { day: 1, title: "ì‹œê°„ ì •ë³µ", mission: "í† ìš”ì¼ ë°¤ 10ì‹œ ì´í›„ ë¯¸ë””ì–´ ë„ê³  ì¼ì° ì·¨ì¹¨í•˜ê¸°", tip: "ì£¼ì¼ ì˜ˆë°°ì— ëŠ¦ëŠ” ê°€ì¥ í° ì´ìœ ëŠ” í† ìš”ì¼ ë°¤ ëŠ¦ê²Œ ìê¸° ë•Œë¬¸ì…ë‹ˆë‹¤." },
        { day: 2, title: "ê³µê°„ ì •ë³µ", mission: "ì§‘ì¤‘ ì˜ ë˜ëŠ” ìë¦¬ ë¯¸ë¦¬ ì •í•´ë‘ê¸°", tip: "ê°•ë‹¨ì´ ì˜ ë³´ì´ëŠ” ì¤‘ì•™ ì•ìª½ì´ ê°€ì¥ ì¢‹ìŠµë‹ˆë‹¤." },
        { day: 3, title: "ë§ˆìŒ ì •ë³µ", mission: "ì˜ˆë°° ì „ 5ë¶„ 'í•˜ë‚˜ë‹˜, ë§ì”€í•˜ì˜µì†Œì„œ' 10ë²ˆ ê³ ë°±", tip: "í•œ ë²ˆ í•œ ë²ˆì´ ê°„ì ˆí•œ ê¸°ë„ê°€ ë˜ê²Œ í•˜ì„¸ìš”." },
        { day: 4, title: "ë¹„íŒ ê¸ˆì‹", mission: "ì„¤êµìì˜ ë§íˆ¬, ì™¸ëª¨ í‰ê°€í•˜ì§€ ì•Šê¸°", tip: "'ë©”ì‹œì§€ ë³¸ì§ˆì— ì§‘ì¤‘í•˜ê²Œ í•˜ì†Œì„œ' ê¸°ë„í•˜ì„¸ìš”." },
        { day: 5, title: "ë¯¸ë””ì–´ ê¸ˆì‹", mission: "ì˜ˆë°° ê°€ëŠ” ê¸¸ì— ë‰´ìŠ¤ ëŒ€ì‹  ì°¬ì–‘ ë“£ê¸°", tip: "ì„¸ìƒ ì—¼ë ¤ ëŒ€ì‹  ì°¬ì–‘ìœ¼ë¡œ ë§ˆìŒì„ ì±„ìš°ì„¸ìš”." },
        { day: 6, title: "ê¸°ë„ ì‹¬ê¸°", mission: "ëª©ì‚¬ë‹˜ ì…ìˆ  ìœ„í•´ 3ë¶„ê°„ ì¤‘ë³´ê¸°ë„", tip: "ë‹¹ì‹ ì˜ ì¤‘ë³´ê¸°ë„ê°€ ì„¤êµìë¥¼ ë•ìŠµë‹ˆë‹¤." },
        { day: 7, title: "ì°¸íšŒí•˜ê¸°", mission: "ì§€ë‚œì£¼ ë¶ˆìˆœì¢… íšŒê°œí•˜ê¸°", tip: "íšŒê°œí•˜ì§€ ì•Šì€ ì£„ëŠ” ë§ˆìŒì„ ë‹¨ë‹¨í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤." },
        { day: 8, title: "ì•„ì´ì»¨íƒ", mission: "ì„¤êµìì™€ ëˆˆ ë§ì¶”ë©° ê³ ê°œ ë„ë•ì´ê¸°", tip: "'ì•„ë©˜' ë§ˆìŒìœ¼ë¡œ ë°˜ì‘í•˜ì„¸ìš”." },
        { day: 9, title: "ë ˆë§ˆ ê¸°ë¡", mission: "í•µì‹¬ ë¬¸ì¥ í•˜ë‚˜ë§Œ êµµê²Œ ì ê¸°", tip: "'ì´ ë¬¸ì¥ì´ë‹¤!' ìˆœê°„ì„ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”." },
        { day: 10, title: "ì•„ë©˜ í›ˆë ¨", mission: "ì‘ì€ ì†Œë¦¬ë¡œë¼ë„ 'ì•„ë©˜' í™”ë‹µí•˜ê¸°", tip: "ì…ìˆ ì„ ì›€ì§ì´ë©° ì†ì‚­ì´ì„¸ìš”." },
        { day: 11, title: "ì˜ì  ì¤‘ë³´", mission: "ì„¤êµìê°€ í˜ë“¤ì–´í•  ë•Œ ì†ìœ¼ë¡œ ê¸°ë„", tip: "'ì„±ë ¹ë‹˜, ë¶™ë“¤ì–´ ì£¼ì†Œì„œ' ê¸°ë„í•˜ì„¸ìš”." },
        { day: 12, title: "3ë¶„ ë¬µìƒ", mission: "ì¶•ë„ í›„ 3ë¶„ê°„ ë§ì”€ ë˜ìƒˆê¸°ê¸°", tip: "'ì´ ë§ì”€ ìŠì§€ ì•Šê²Œ í•˜ì†Œì„œ' ê¸°ë„í•˜ì„¸ìš”." },
        { day: 13, title: "ì„±ê²½ í™•ì¸", mission: "ì£¼ì¼ ë³¸ë¬¸ ì§‘ì—ì„œ ì†Œë¦¬ ë‚´ì–´ ì½ê¸°", tip: "ì²œì²œíˆ, í•œ êµ¬ì ˆì”© ì½ìœ¼ì„¸ìš”." },
        { day: 14, title: "ê°ì‚¬ í‘œí˜„", mission: "ë§ì”€ì— ëŒ€í•´ ê°ì‚¬ê¸°ë„ ë“œë¦¬ê¸°", tip: "ê°ì‚¬ëŠ” ì€í˜œë¥¼ ë¶™ì¡ëŠ” ê°€ì¥ ê°•ë ¥í•œ ë°©ë²•ì…ë‹ˆë‹¤." },
        { day: 15, title: "í•œ ì¤„ ìš”ì•½", mission: "ë§ì”€ì„ í•œ ë¬¸ì¥ìœ¼ë¡œ ìš”ì•½, ë°°ê²½í™”ë©´ ì„¤ì •", tip: "ë‚´ ì–¸ì–´ë¡œ í’€ì–´ ì“°ì„¸ìš”." },
        { day: 16, title: "ì…ìˆ  ì „íŒŒ", mission: "ê°€ì¡±ì´ë‚˜ ëª©ì¥ì— ë°›ì€ ì€í˜œ ì„¤ëª…í•˜ê¸°", tip: "ê°€ë¥´ì¹˜ëŠ” ìê°€ ê°€ì¥ ë§ì´ ë°°ì›ë‹ˆë‹¤." },
        { day: 17, title: "ì†í•´ ê°ìˆ˜", mission: "ìˆœì¢… ìœ„í•´ êµ¬ì²´ì  ì†í•´ ê°ìˆ˜í•˜ê¸°", tip: "ìˆœì¢…ì—ëŠ” ëŒ€ê°€ê°€ ë”°ë¦…ë‹ˆë‹¤." },
        { day: 18, title: "ìˆœì¢… ì ê²€", mission: "ê²°ë‹¨ ë‚´ìš© ì§€ì¼°ëŠ”ì§€ ì²´í¬í•˜ê¸°", tip: "ì‹¤íŒ¨í–ˆë‹¤ë©´ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”." },
        { day: 19, title: "ê²©ë ¤í•˜ê¸°", mission: "ëª©ì‚¬ë‹˜ê»˜ ìˆœì¢… ê°„ì¦ ë¬¸ì ë³´ë‚´ê¸°", tip: "êµ¬ì²´ì ì¸ ê°„ì¦ì„ ì“°ì„¸ìš”." },
        { day: 20, title: "ë‚˜ëˆ”ì˜ ë°¤", mission: "í›ˆë ¨ ì¤‘ ëŠë‚€ ë³€í™” ë‚˜ëˆ„ê¸°", tip: "í•¨ê»˜ ë‚˜ëˆ„ë©´ ë” ë©€ë¦¬ ê°‘ë‹ˆë‹¤." },
        { day: 21, title: "ì„œì•½ì‹", mission: "í‰ìƒ ê²½ì²­í•˜ëŠ” ì˜ˆë°°ì ë˜ê¸° ì„œì•½", tip: "21ì¼ì´ ëì´ ì•„ë‹ˆë¼ ì‹œì‘ì…ë‹ˆë‹¤.", isPrayer: true }
    ],
    en: [
        { day: 1, title: "Conquer Time", mission: "Turn off media after 10 PM Saturday, sleep early", tip: "The main reason for lateness is staying up late Saturday." },
        { day: 2, title: "Conquer Space", mission: "Decide your best seat in advance", tip: "Center front with clear view is best." },
        { day: 3, title: "Conquer Heart", mission: "Confess 'God, speak to me' 10 times before worship", tip: "Make each confession heartfelt." },
        { day: 4, title: "Fast from Criticism", mission: "Don't evaluate preacher's style or appearance", tip: "Pray to focus on the message's essence." },
        { day: 5, title: "Media Fast", mission: "Listen to worship music on the way to church", tip: "Fill your heart with praise." },
        { day: 6, title: "Plant Prayer", mission: "Intercede for pastor's lips for 3 minutes", tip: "Your intercession helps the preacher." },
        { day: 7, title: "Repentance", mission: "Repent of last week's disobedience", tip: "Unrepented sin hardens the heart." },
        { day: 8, title: "Eye Contact", mission: "Make eye contact and nod with preacher", tip: "Respond with an 'Amen' heart." },
        { day: 9, title: "Record Rhema", mission: "Write only one core sentence in bold", tip: "Don't miss the 'This is it!' moment." },
        { day: 10, title: "Amen Training", mission: "Respond with 'Amen' even quietly", tip: "Whisper softly." },
        { day: 11, title: "Intercession", mission: "Pray silently when preacher struggles", tip: "Pray 'Holy Spirit, hold them now.'" },
        { day: 12, title: "3-Min Meditation", mission: "Sit 3 minutes after benediction", tip: "Pray 'Help me not forget this Word.'" },
        { day: 13, title: "Scripture Check", mission: "Read sermon passage aloud at home", tip: "Read slowly, verse by verse." },
        { day: 14, title: "Gratitude", mission: "Pray thanksgiving for the Word", tip: "Gratitude holds onto grace." },
        { day: 15, title: "One-Line Summary", mission: "Summarize and set as phone wallpaper", tip: "Write in your own words." },
        { day: 16, title: "Verbal Sharing", mission: "Explain grace to family or group", tip: "Those who teach learn most." },
        { day: 17, title: "Accept Loss", mission: "Accept a cost for obedience", tip: "Obedience has a price." },
        { day: 18, title: "Obedience Check", mission: "Check if you kept commitment", tip: "If failed, try again." },
        { day: 19, title: "Encouragement", mission: "Send pastor a testimony message", tip: "Write specific testimony." },
        { day: 20, title: "Sharing Night", mission: "Share changes from training", tip: "Sharing takes us further." },
        { day: 21, title: "Covenant", mission: "Covenant to be lifelong listening worshiper", tip: "Day 21 is the beginning.", isPrayer: true }
    ]
};

const assessmentQData = {
    ko: [
        "ì˜ˆë°° 10ë¶„ ì „ì— ë„ì°©í•˜ì—¬ ë§ˆìŒì„ ì¤€ë¹„í–ˆìŠµë‹ˆê¹Œ?",
        "ì„¤êµ ë‚´ë‚´ íœ´ëŒ€í°ì„ ë³´ì§€ ì•Šê³  ì§‘ì¤‘í–ˆìŠµë‹ˆê¹Œ?",
        "ì„¤êµ ì „í›„ë¡œ 'í•˜ë‚˜ë‹˜, ë§ì”€í•˜ì†Œì„œ' ê¸°ë„í–ˆìŠµë‹ˆê¹Œ?",
        "ë”´ìƒê°ì„ ì˜ì§€ì ìœ¼ë¡œ ëŠì–´ë‚´ê³  ë‹¤ì‹œ ì§‘ì¤‘í–ˆìŠµë‹ˆê¹Œ?",
        "ì±…ë§ì˜ ë§ì”€ë„ 'ì•„ë©˜'ìœ¼ë¡œ ë°›ì•„ë“¤ì˜€ìŠµë‹ˆê¹Œ?",
        "ë©”ì‹œì§€ ë³¸ì§ˆì— ì§‘ì¤‘í–ˆìŠµë‹ˆê¹Œ? (ìŠ¤íƒ€ì¼ ì•„ë‹Œ)",
        "ì‹¤ì²œí•  í•œ ê°€ì§€ë¥¼ ì •í–ˆìŠµë‹ˆê¹Œ?",
        "ì£¼ì¤‘ì— ì‹¤ì œë¡œ ì ìš©í•˜ë ¤ ë…¸ë ¥í–ˆìŠµë‹ˆê¹Œ?"
    ],
    en: [
        "Did you arrive 10 min early to prepare?",
        "Did you stay focused without checking phone?",
        "Did you pray 'God, speak to me'?",
        "Did you consciously refocus when distracted?",
        "Did you receive rebuke with 'Amen'?",
        "Did you focus on message essence?",
        "Did you decide one thing to practice?",
        "Did you try to apply it during week?"
    ]
};

const prayerTextData = {
    ko: `ì‚¬ë‘í•˜ëŠ” í•˜ë‚˜ë‹˜ ì•„ë²„ì§€,
ì§€ë‚œ 21ì¼ ë™ì•ˆ ì œ ê·€ë¥¼ ì—´ì–´ ì£¼ì‹œê³ ,
ë§ì”€ì„ ë“£ê³  ìˆœì¢…í•˜ëŠ” í›ˆë ¨ì„ ì‹œì¼œ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.

ì´ì œ ì €ëŠ” ê³ ë°±í•©ë‹ˆë‹¤.
ì €ëŠ” ë” ì´ìƒ ì„¤êµë¥¼ ì†Œë¹„í•˜ëŠ” ì²­ì¤‘ì´ ì•„ë‹ˆë¼,
ë§ì”€ì„ ì‚¬ëª¨í•˜ê³ , ë“£ê³ , ìˆœì¢…í•˜ëŠ” ì˜ˆë°°ìì…ë‹ˆë‹¤.

ì£¼ë‹˜, ì•ìœ¼ë¡œë„ ì œ ê·€ë¥¼ ì—´ì–´ ì£¼ì‹œê³ ,
ë§ˆìŒì„ ë¶€ë“œëŸ½ê²Œ í•˜ì‹œë©°,
ë°œì„ ìˆœì¢…ì˜ ê¸¸ë¡œ ì¸ë„í•˜ì—¬ ì£¼ì˜µì†Œì„œ.

ì˜ˆìˆ˜ ê·¸ë¦¬ìŠ¤ë„ì˜ ì´ë¦„ìœ¼ë¡œ ê¸°ë„í•©ë‹ˆë‹¤. ì•„ë©˜.`,
    en: `Dear Heavenly Father,
Thank You for opening my ears over 21 days
and training me to hear and obey Your Word.

Now I confess:
I am no longer a consumer of sermons,
but a worshiper who longs for, hears, and obeys.

Lord, continue to open my ears,
soften my heart, and guide my feet on obedience.

In Jesus Christ's name. Amen.`
};

// ì™„ë£Œëœ ì¼ìˆ˜ ì €ì¥
let trainingCompleted = JSON.parse(localStorage.getItem('trainingCompleted') || '[]');

// í˜„ì¬ ì–¸ì–´ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ì‚¬ì´íŠ¸ì˜ curLang ë³€ìˆ˜ ì‚¬ìš©)
function getCurrentLang() {
    // curLangì€ ì „ì—­ ë³€ìˆ˜ë¡œ toggleLang()ì—ì„œ ê´€ë¦¬ë¨
    return typeof curLang !== 'undefined' ? curLang : (localStorage.getItem('lang') || 'ko');
}

// ì±Œë¦°ì§€ ì„¹ì…˜ ì „í™˜
function showChallengeSection(sectionId) {
    // ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê¸°
    document.querySelectorAll('.challenge-section').forEach(s => s.style.display = 'none');
    // ì„ íƒëœ ì„¹ì…˜ ë³´ì´ê¸°
    document.getElementById('section-' + sectionId).style.display = 'block';
    
    // íƒ­ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³€ê²½
    document.querySelectorAll('.challenge-tab-btn').forEach(btn => {
        btn.style.background = 'transparent';
        btn.style.color = '#666';
    });
    event.target.style.background = 'var(--navy)';
    event.target.style.color = 'white';
    
    // ì„¹ì…˜ë³„ ì´ˆê¸°í™”
    if (sectionId === 'training') renderTrainingDays();
}

// ìê°€ ì§„ë‹¨ ë Œë”ë§
function renderAssessment() {
    const currentLang = (typeof curLang !== 'undefined') ? curLang : 'ko';
    const questions = assessmentQData[currentLang];
    const container = document.getElementById('assessmentContainer');
    if (!container) return;
    
    let html = '';
    questions.forEach((q, i) => {
        html += `
            <div class="card" style="margin-bottom:10px;">
                <p style="font-size:14px; margin-bottom:10px;"><strong>${i+1}.</strong> ${q}</p>
                <div style="display:flex; gap:10px; justify-content:center;">
                    ${[1,2,3,4,5].map(n => `
                        <label style="display:flex; flex-direction:column; align-items:center; cursor:pointer;">
                            <input type="radio" name="assess${i}" value="${n}" onchange="calcAssessmentScore()" style="margin-bottom:3px;">
                            <span style="font-size:12px;">${n}</span>
                        </label>
                    `).join('')}
                </div>
            </div>
        `;
    });
    container.innerHTML = html;
}

// ìê°€ ì§„ë‹¨ ì ìˆ˜ ê³„ì‚°
function calcAssessmentScore() {
    // curLang ì§ì ‘ ì‚¬ìš© (ê°™ì€ ìŠ¤í¬ë¦½íŠ¸ ë¸”ë¡ ë‚´ ì „ì—­ ë³€ìˆ˜)
    const currentLang = (typeof curLang !== 'undefined') ? curLang : 'ko';
    let total = 0;
    for (let i = 0; i < 8; i++) {
        const sel = document.querySelector(`input[name="assess${i}"]:checked`);
        if (sel) total += parseInt(sel.value);
    }
    document.getElementById('assessmentTotal').textContent = total;
    
    const resultDiv = document.getElementById('assessmentResult');
    const titleEl = document.getElementById('assessmentResultTitle');
    const textEl = document.getElementById('assessmentResultText');
    
    if (total > 0) {
        resultDiv.style.display = 'block';
        if (currentLang === 'ko') {
            if (total >= 35) {
                titleEl.textContent = 'ğŸŒ¾ ì˜¥í†  (Good Soil)';
                textEl.textContent = 'ì¶•í•˜í•©ë‹ˆë‹¤! ê±´ê°•í•œ ì²­ì¤‘ì…ë‹ˆë‹¤.';
            } else if (total >= 25) {
                titleEl.textContent = 'ğŸŒ± ì„±ì¥ ì¤‘';
                textEl.textContent = 'ì¢‹ì€ ì¶œë°œ! í›ˆë ¨ìœ¼ë¡œ ë” ì„±ì¥í•  ê±°ì˜ˆìš”.';
            } else {
                titleEl.textContent = 'ğŸ”¨ í›ˆë ¨ í•„ìš”';
                textEl.textContent = '21ì¼ í›ˆë ¨ì´ í° ë³€í™”ë¥¼ ê°€ì ¸ì˜¬ ê±°ì˜ˆìš”!';
            }
        } else {
            if (total >= 35) {
                titleEl.textContent = 'ğŸŒ¾ Good Soil';
                textEl.textContent = 'Congratulations! You are a healthy listener.';
            } else if (total >= 25) {
                titleEl.textContent = 'ğŸŒ± Growing';
                textEl.textContent = 'Good start! Training will help you grow.';
            } else {
                titleEl.textContent = 'ğŸ”¨ Needs Training';
                textEl.textContent = '21-day training will bring great change!';
            }
        }
    }
}

// 21ì¼ í›ˆë ¨ ë Œë”ë§
function renderTrainingDays() {
    const currentLang = (typeof curLang !== 'undefined') ? curLang : 'ko';
    const days = trainingDaysData[currentLang];
    const missionLabel = currentLang === 'ko' ? 'ì˜¤ëŠ˜ì˜ ë¯¸ì…˜' : "Today's Mission";
    const tipLabel = currentLang === 'ko' ? 'ì‹¤ì²œ íŒ' : 'Practice Tip';
    const prayerTitle = currentLang === 'ko' ? 'ğŸ™ í‰ìƒ ê²½ì²­ ì„œì•½ ê¸°ë„ë¬¸' : 'ğŸ™ Covenant Prayer';
    
    let week1 = '', week2 = '', week3 = '';
    
    days.forEach((d, i) => {
        const isCompleted = trainingCompleted.includes(d.day);
        const prayerHTML = d.isPrayer ? `
            <div style="background:#E8F5E9; border-left:3px solid #4CAF50; padding:12px; margin-top:10px; border-radius:0 8px 8px 0;">
                <p style="font-weight:700; color:var(--navy); margin-bottom:8px;">${prayerTitle}</p>
                <p style="font-style:italic; font-size:13px; white-space:pre-line;">${prayerTextData[currentLang]}</p>
            </div>
        ` : '';
        
        const cardHTML = `
            <div class="card training-day-card ${isCompleted ? 'completed' : ''}" id="trainDay${d.day}" style="margin-bottom:10px; ${isCompleted ? 'border-left:4px solid #4CAF50; background:#E8F5E9;' : ''}">
                <div style="display:flex; align-items:center; gap:10px; cursor:pointer;" onclick="toggleDayDetail(${d.day})">
                    <input type="checkbox" ${isCompleted ? 'checked' : ''} onclick="event.stopPropagation(); toggleDayComplete(${d.day})" style="width:20px; height:20px; accent-color:#4CAF50;">
                    <span style="background:${isCompleted ? '#4CAF50' : 'var(--navy)'}; color:white; padding:3px 10px; border-radius:12px; font-size:12px;">Day ${d.day}</span>
                    <span style="flex:1; font-weight:600; font-size:14px;">${d.title}</span>
                    <span class="day-toggle-icon" id="toggle${d.day}">â–¼</span>
                </div>
                <div class="day-detail" id="detail${d.day}" style="display:none; margin-top:12px; padding-top:12px; border-top:1px solid #eee;">
                    <div style="background:#FFF9C4; border-left:3px solid #FFC107; padding:10px; margin-bottom:8px; border-radius:0 6px 6px 0;">
                        <p style="font-weight:700; font-size:12px; color:var(--navy);">ğŸ“Œ ${missionLabel}</p>
                        <p style="font-size:13px;">${d.mission}</p>
                    </div>
                    <div style="background:#E3F2FD; border-left:3px solid #2196F3; padding:10px; border-radius:0 6px 6px 0;">
                        <p style="font-weight:700; font-size:12px; color:#1565C0;">ğŸ’¡ ${tipLabel}</p>
                        <p style="font-size:13px;">${d.tip}</p>
                    </div>
                    ${prayerHTML}
                </div>
            </div>
        `;
        
        if (i < 7) week1 += cardHTML;
        else if (i < 14) week2 += cardHTML;
        else week3 += cardHTML;
    });
    
    const w1 = document.getElementById('week1Container');
    const w2 = document.getElementById('week2Container');
    const w3 = document.getElementById('week3Container');
    if (w1) w1.innerHTML = week1;
    if (w2) w2.innerHTML = week2;
    if (w3) w3.innerHTML = week3;
    
    updateTrainingProgress();
}

// Day ìƒì„¸ í† ê¸€
function toggleDayDetail(day) {
    const detail = document.getElementById('detail' + day);
    const icon = document.getElementById('toggle' + day);
    if (detail.style.display === 'none') {
        detail.style.display = 'block';
        icon.textContent = 'â–²';
    } else {
        detail.style.display = 'none';
        icon.textContent = 'â–¼';
    }
}

// Day ì™„ë£Œ í† ê¸€
function toggleDayComplete(day) {
    if (trainingCompleted.includes(day)) {
        trainingCompleted = trainingCompleted.filter(d => d !== day);
    } else {
        trainingCompleted.push(day);
    }
    localStorage.setItem('trainingCompleted', JSON.stringify(trainingCompleted));
    renderTrainingDays();
}

// ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
function updateTrainingProgress() {
    const count = trainingCompleted.length;
    const pct = (count / 21) * 100;
    
    const daysEl = document.getElementById('trainingProgressDays');
    const barEl = document.getElementById('trainingProgressBar');
    
    if (daysEl) daysEl.textContent = count;
    if (barEl) barEl.style.width = pct + '%';
}

// ì§„í–‰ ì´ˆê¸°í™”
function resetTrainingProgress() {
    const currentLang = (typeof curLang !== 'undefined') ? curLang : 'ko';
    const msg = currentLang === 'ko' ? 'ì •ë§ë¡œ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?' : 'Reset all progress?';
    if (confirm(msg)) {
        trainingCompleted = [];
        localStorage.setItem('trainingCompleted', JSON.stringify([]));
        renderTrainingDays();
    }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
    // ìê°€ ì§„ë‹¨ ë Œë”ë§
    if (document.getElementById('assessmentContainer')) {
        renderAssessment();
    }
    // 21ì¼ í›ˆë ¨ ë Œë”ë§
    if (document.getElementById('week1Container')) {
        renderTrainingDays();
    }
});

    </script>
</body>
</html>
